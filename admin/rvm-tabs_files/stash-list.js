(()=>{var e,t={2629:(e,t,n)=>{var o=n(4015),s=n(3645)(o);s.push([e.id,'\n._2BbnOSDaIIPYzrnKOWof-c { display: inline-block;\n}\n._2REwUKyK8aCRjT8ddRVY6y { display: inline-block;\n}\n._30_tYHQW06VQ9Y3Ag0el1f {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 99;\n\n    display: block;\n    cursor: default;\n    content: " ";\n    background: transparent;\n    overflow: hidden;\n}\n._3MzuNnK9B2F7nKcmbOodVx {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 100;\n\n    overflow: hidden;\n    box-sizing: border-box;\n    display: grid;\n    grid-template-rows: 1fr;\n    grid-template-columns: 1fr;\n}\n._3MzuNnK9B2F7nKcmbOodVx.above { align-items: end;\n}\n._3MzuNnK9B2F7nKcmbOodVx.below { align-items: start;\n}\n._3MzuNnK9B2F7nKcmbOodVx.left { justify-items: start;\n}\n._3MzuNnK9B2F7nKcmbOodVx.right { justify-items: end;\n}\n.rjC2am7-HXxpsGtxnXGo9 {\n    box-sizing: border-box;\n    max-width: 100%;\n    max-height: 100%;\n}\n',"",{version:3,sources:["webpack://./src/components/menu.vue"],names:[],mappings:";AAyIA,2BAAW,qBAAqB;AAAE;AAClC,2BAAW,qBAAqB;AAAE;AAElC;IACI,eAAe;IACf,OAAO;IACP,MAAM;IACN,QAAQ;IACR,SAAS;IACT,WAAW;;IAEX,cAAc;IACd,eAAe;IACf,YAAY;IACZ,uBAAuB;IACvB,gBAAgB;AACpB;AAEA;IACI,eAAe;IACf,OAAO;IACP,MAAM;IACN,QAAQ;IACR,SAAS;IACT,YAAY;;IAEZ,gBAAgB;IAChB,sBAAsB;IACtB,aAAa;IACb,uBAAuB;IACvB,0BAA0B;AAC9B;AACA,iCAAyB,gBAAgB;AAAE;AAC3C,iCAAyB,kBAAkB;AAAE;AAC7C,gCAAwB,oBAAoB;AAAE;AAC9C,iCAAyB,kBAAkB;AAAE;AAE7C;IACI,sBAAsB;IACtB,eAAe;IACf,gBAAgB;AACpB",sourcesContent:['<template>\n<details ref="details" :open="isOpen" :class="{\n            [$style.details]: true, [horizontal]: true, [vertical]: true,\n         }"\n         @toggle="onToggle" @click.prevent.stop="open">\n\n  <summary ref="summary" :class="{[$style.summary]: true, [summaryClass]: true}"\n           tabindex="0">\n    <slot name="summary">{{name}}</slot>\n  </summary>\n\n  <component v-if="isOpen || persist" :is="inPlace ? \'div\' : \'teleport\'" to="body">\n    <div :style="isOpen ? \'\' : \'display: none\'"\n         :class="{[$style.modal]: true, \'menu-modal\': true, [modalClass]: true}"\n         tabindex="-1"\n         @keydown.esc.prevent.stop="close" @click.prevent.stop="close">\n      <div ref="bounds" :style="bounds" :class="{\n                \'menu-bounds\': true, [$style.bounds]: true,\n                [vertical]: true, [horizontal]: true\n            }">\n        <nav ref="menu" :class="$style.menu" tabIndex="0"\n             @click.stop="close" @focusout="onFocusOut">\n          <slot></slot>\n        </nav>\n      </div>\n    </div>\n  </component>\n</details>\n</template>\n\n<script lang="ts">\nimport {Teleport, Component, defineComponent} from \'vue\';\n\nexport default defineComponent({\n    components: {\n        // Cast: work around https://github.com/vuejs/vue-next/issues/2855\n        Teleport: Teleport as unknown as Component,\n    },\n\n    props: {\n        name: String,\n        summaryClass: String,\n        modalClass: String,\n        inPlace: Boolean,\n        persist: Boolean,\n    },\n\n    data: () => ({\n        viewport: undefined as DOMRect | undefined,\n        origin: undefined as DOMRect | undefined,\n        vertical: \'below\' as \'above\' | \'below\',\n        horizontal: \'left\' as \'left\' | \'right\',\n        isOpen: false,\n    }),\n\n    computed: {\n        vertical_bound(): string {\n            if (this.vertical === \'below\') {\n                return `padding-top: ${this.origin?.bottom || 0}px;`;\n            } else {\n                return `padding-bottom: ${this.viewport!.height - this.origin!.top}px;`;\n            }\n        },\n        horizontal_bound(): string {\n            if (this.horizontal === \'left\') {\n                return `padding-left: ${this.origin?.left}px;`;\n            } else {\n                return `padding-right: ${this.viewport!.width - this.origin!.right}px;`;\n            }\n        },\n        bounds(): string {\n            return `${this.horizontal_bound} ${this.vertical_bound}`;\n        },\n    },\n\n    methods: {\n        updatePosition() {\n            const summary = this.$refs.summary as HTMLElement;\n\n            this.viewport = document.body.getBoundingClientRect();\n            const pos = summary.getBoundingClientRect();\n            const center = {\n                x: this.viewport.width / 2,\n                y: this.viewport.height / 2,\n            };\n\n            this.origin = pos;\n            this.vertical = pos.bottom < center.y ? \'below\' : \'above\';\n            this.horizontal = pos.right < center.x ? \'left\' : \'right\';\n        },\n\n        open() {\n            // Do this first to avoid flickering\n            this.updatePosition();\n            this.isOpen = true;\n            this.$nextTick(() => {\n                // Make sure the focus is within the menu so we can detect when\n                // focus leaves the menu, and close it automatically.\n                (<HTMLElement>this.$refs.menu).focus();\n                this.$emit(\'open\');\n            });\n        },\n\n        close() {\n            // Move the focus out of the menu before we try to close it,\n            // otherwise Firefox gets confused about where the focus is and will\n            // forget to turn off :focus-within attributes on some parent\n            // elements... (this seems to be a Firefox bug)\n            (<HTMLElement>this.$refs.summary).focus();\n            this.$nextTick(() => {\n                this.isOpen = false;\n                this.$emit(\'close\');\n                (<HTMLElement>this.$refs.summary).blur();\n            });\n        },\n\n        onToggle() {\n            const details = this.$refs.details as HTMLDetailsElement;\n            if (details.open) {\n                this.open();\n            } else {\n                this.close();\n            }\n        },\n\n        onFocusOut() {\n            const menu = this.$refs.menu as HTMLElement;\n            const bounds = this.$refs.bounds as HTMLElement;\n            if (menu.closest(\'.menu-bounds:focus-within\') !== bounds) {\n                this.close();\n            }\n        },\n    },\n});\n<\/script>\n\n<style module>\n.details { display: inline-block; }\n.summary { display: inline-block; }\n\n.modal {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 99;\n\n    display: block;\n    cursor: default;\n    content: " ";\n    background: transparent;\n    overflow: hidden;\n}\n\n.bounds {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 100;\n\n    overflow: hidden;\n    box-sizing: border-box;\n    display: grid;\n    grid-template-rows: 1fr;\n    grid-template-columns: 1fr;\n}\n.bounds:global(.above) { align-items: end; }\n.bounds:global(.below) { align-items: start; }\n.bounds:global(.left) { justify-items: start; }\n.bounds:global(.right) { justify-items: end; }\n\n.menu {\n    box-sizing: border-box;\n    max-width: 100%;\n    max-height: 100%;\n}\n</style>\n'],sourceRoot:""}]),s.locals={details:"_2BbnOSDaIIPYzrnKOWof-c",summary:"_2REwUKyK8aCRjT8ddRVY6y",modal:"_30_tYHQW06VQ9Y3Ag0el1f",bounds:"_3MzuNnK9B2F7nKcmbOodVx",menu:"rjC2am7-HXxpsGtxnXGo9"},e.exports=s},1504:(e,t,n)=>{var o=n(4015),s=n(3645)(o);s.push([e.id,"\n._1tpou8ANDFfBelaMn4Diwz {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 99;\n    cursor: default;\n    overflow: hidden;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin: 0;\n}\n","",{version:3,sources:["webpack://./src/components/modal-backdrop.vue"],names:[],mappings:";AAgBA;IACI,eAAe;IACf,MAAM;IACN,SAAS;IACT,OAAO;IACP,QAAQ;IACR,WAAW;IACX,eAAe;IACf,gBAAgB;;IAEhB,aAAa;IACb,sBAAsB;IACtB,uBAAuB;IACvB,mBAAmB;IACnB,SAAS;AACb",sourcesContent:['<template>\n<aside :class="{\'modal-backdrop\': true, [$style.modal]: true}"\n       tabindex="-1" v-bind="$attrs" ref="modal">\n    <slot></slot>\n</aside>\n</template>\n\n<script lang="ts">\nimport {defineComponent} from \'vue\';\n\nexport default defineComponent({\n    mounted() { (<HTMLElement>this.$refs.modal).focus(); }\n});\n<\/script>\n\n<style module>\n.modal {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 99;\n    cursor: default;\n    overflow: hidden;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin: 0;\n}\n</style>\n'],sourceRoot:""}]),s.locals={modal:"_1tpou8ANDFfBelaMn4Diwz"},e.exports=s},3409:(e,t,n)=>{var o=n(4015),s=n(3645)(o);s.push([e.id,"\n._2RRF4aDf3jCvBuLHlymr_c {\n    margin-bottom: 1em;\n}\n.svakO-Hsh33o_cQLsc4zp > *:not(summary) {\n    margin-left: var(--ctrl-mw);\n}\n.svakO-Hsh33o_cQLsc4zp > summary {\n    border-radius: var(--ctrl-border-radius);\n}\n.svakO-Hsh33o_cQLsc4zp > summary:hover {\n    background-color: var(--userlink-hover-fg);\n}\n.svakO-Hsh33o_cQLsc4zp > summary:active {\n    background-color: var(--userlink-active-fg);\n}\n._14qI9gZX4AJzVvLZw1GJ09 {\n    user-select: text;\n    -moz-user-select: text;\n}\n._3Wsu_jwBfbpuoA4RNMLNz8 {\n    user-select: text;\n    -moz-user-select: text;\n    cursor: text;\n    margin: 0;\n}\n._351Hld_nJXTOfQBzDE2VQo { font-style: italic;\n}\n._1Mv4tYQasPLRkBpLwBP5g7 {\n    font-weight: bold;\n    white-space: pre-wrap;\n}\n._3EYckWrxsYRsvsmTG9HSyv {\n    padding-left: var(--ctrl-pw);\n    border-left: 2px solid var(--ctrl-border-clr);\n    white-space: pre-wrap;\n}\n","",{version:3,sources:["webpack://./src/components/oops-notification.vue"],names:[],mappings:";AAuHA;IACI,kBAAkB;AACtB;AAEA;IACI,2BAA2B;AAC/B;AAEA;IACI,wCAAwC;AAC5C;AAEA;IACI,0CAA0C;AAC9C;AAEA;IACI,2CAA2C;AAC/C;AAEA;IACI,iBAAiB;IACjB,sBAAsB;AAC1B;AAEA;IACI,iBAAiB;IACjB,sBAAsB;IACtB,YAAY;IACZ,SAAS;AACb;AAEA,2BAAe,kBAAkB;AAAE;AACnC;IACI,iBAAiB;IACjB,qBAAqB;AACzB;AACA;IACI,4BAA4B;IAC5B,6CAA6C;IAC7C,qBAAqB;AACzB",sourcesContent:['<template>\n<Notification inactive @dismiss="clearErrorLog">\n    <div :class="$style.msg">Oops!  Something went wrong.  Tab Stash will try to\n    recover automatically.</div>\n\n    <details :class="$style.details" @click.stop="">\n        <summary>Get Help With This Crash</summary>\n\n        <p>Here are a few options that might help.  Crash details are shown\n        below for easy reference&mdash;they will be cleared once you close this\n        notification.</p>\n\n        <p>\n            <button @click.stop="showTroubleshooting">Show Troubleshooting Guide</button>\n            <button @click.stop="searchGitHub">Search for Similar Issues</button>\n            <button @click.stop="copyErrorLog">Copy Crash Details</button>\n        </p>\n\n        <p><output ref="err_log_el" :class="$style.err_details_list">\n            <p :class="$style.environment">\n                <div>Browser: {{aboutBrowser}} ({{aboutPlatform}})</div>\n                <div>Extension: {{aboutExtension}}</div>\n            </p>\n            <p v-for="err of errorLog">\n                <div :class="$style.err_summary">{{err.summary}}</div>\n                <div :class="$style.err_details">{{err.details}}</div>\n            </p>\n        </output></p>\n    </details>\n\n    <details :class="$style.details" @click.stop="">\n        <summary>Hide Crash Reports</summary>\n\n        <p>If you\'re seeing too many crash reports, you can temporarily hide\n        them:</p>\n\n        <p>\n            <button @click.stop="hideCrashReports(5*60*1000)">for 5 minutes</button>\n            <button @click.stop="hideCrashReports(60*60*1000)">for 1 hour</button>\n            <button @click.stop="hideCrashReports(24*60*60*1000)">for 1 day</button>\n            <button @click.stop="hideCrashReports(7*24*60*60*1000)">for 1 week</button>\n        </p>\n\n        <p>Crash reports can be turned on again in settings.</p>\n    </details>\n</Notification>\n</template>\n\n<script lang="ts">\nimport browser from \'webextension-polyfill\';\nimport {Ref, ref, inject} from \'vue\';\n\nconst TROUBLESHOOTING_URL = "https://josh-berry.github.io/tab-stash/support.html";\n\nconst aboutBrowser = ref(\'<Unknown Browser>\');\nif (browser.runtime.getBrowserInfo) {\n    browser.runtime.getBrowserInfo().then(info => {\n        aboutBrowser.value = `${info.vendor} ${info.name} ${info.version} ${info.buildID}`;\n    });\n}\n\nconst aboutPlatform = ref(\'<Unknown Platform>\');\nif (browser.runtime.getPlatformInfo) {\n    browser.runtime.getPlatformInfo().then(info => {\n        aboutPlatform.value = `${info.os} ${info.arch}`;\n    });\n}\n\nconst aboutExtension = ref(\'<Unknown Extension>\');\nif (browser.management.getSelf) {\n    browser.management.getSelf().then(info => {\n        aboutExtension.value = `${info.name} ${info.version} (${info.installType})`;\n    });\n}\n<\/script>\n\n<script setup lang="ts">\nimport {errorLog, clearErrorLog, logErrorsFrom} from \'../util/oops\';\nimport {Model} from \'../model\';\nconst Notification = require(\'./notification.vue\').default;\n\nconst model = inject<Model>(\'$model\')!;\n\nconst err_log_el: Ref<object | null> = ref(null);\n\nconst showTroubleshooting = () =>\n    logErrorsFrom(() => browser.tabs.create({url: TROUBLESHOOTING_URL}));\n\nconst searchGitHub = () => {\n    // Some heuristics to widen the search (and hopefully return better results)\n    // by excluding things that look like unique identifiers.\n    const terms = errorLog[0].summary\n        .replace(/[0-9]+/g, \'\')\n        .replace(/:\\s+\\S+$/, \'\')\n        .replace(/\\S+:\\S+/g, \'\')\n        .replace(/\\S+\\.\\S+/g, \'\')\n        .replace(/"[^"]*"/g, \'\')\n        .replace(/`[^`]*`/g, \'\')\n        .replace(/\\S+\\@\\S+/g, \'\');\n    const url = `https://github.com/josh-berry/tab-stash/issues?q=is%3Aissue+${\n        encodeURIComponent(terms)}`;\n    logErrorsFrom(() => browser.tabs.create({url}));\n};\n\nconst copyErrorLog = async () => {\n    const el = <HTMLElement>err_log_el.value;\n\n    el.focus();\n    window.getSelection()!.selectAllChildren(el);\n    document.execCommand(\'copy\');\n};\n\nconst hideCrashReports = (ms: number) => logErrorsFrom(async () => {\n    await model.options.local.set({hide_crash_reports_until: Date.now() + ms});\n    clearErrorLog();\n});\n<\/script>\n\n<style module>\n.msg {\n    margin-bottom: 1em;\n}\n\n.details > *:not(summary) {\n    margin-left: var(--ctrl-mw);\n}\n\n.details > summary {\n    border-radius: var(--ctrl-border-radius);\n}\n\n.details > summary:hover {\n    background-color: var(--userlink-hover-fg);\n}\n\n.details > summary:active {\n    background-color: var(--userlink-active-fg);\n}\n\n.err_details_list {\n    user-select: text;\n    -moz-user-select: text;\n}\n\n.error_log {\n    user-select: text;\n    -moz-user-select: text;\n    cursor: text;\n    margin: 0;\n}\n\n.environment { font-style: italic; }\n.err_summary {\n    font-weight: bold;\n    white-space: pre-wrap;\n}\n.err_details {\n    padding-left: var(--ctrl-pw);\n    border-left: 2px solid var(--ctrl-border-clr);\n    white-space: pre-wrap;\n}\n</style>\n'],sourceRoot:""}]),s.locals={msg:"_2RRF4aDf3jCvBuLHlymr_c",details:"svakO-Hsh33o_cQLsc4zp",err_details_list:"_14qI9gZX4AJzVvLZw1GJ09",error_log:"_3Wsu_jwBfbpuoA4RNMLNz8",environment:"_351Hld_nJXTOfQBzDE2VQo",err_summary:"_1Mv4tYQasPLRkBpLwBP5g7",err_details:"_3EYckWrxsYRsvsmTG9HSyv"},e.exports=s},7835:(e,t,n)=>{var o=n(4015),s=n(3645)(o);s.push([e.id,"\n.cJ8WCbEido8zp3kWKTl6t {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    padding-left: 0 !important;\n    padding-right: 0 !important;\n}\n","",{version:3,sources:["webpack://./src/stash-list/selection-menu.vue"],names:[],mappings:";AA2KA;IACI,kBAAkB;IAClB,gBAAgB;IAChB,aAAa;IACb,sBAAsB;IACtB,0BAA0B;IAC1B,2BAA2B;AAC/B",sourcesContent:['<template>\n<Menu ref="menu" class="menu selection-menu" modalClass="action-container"\n      @open="onOpenMenu">\n    <template #summary>\n        <div class="count">{{selectedCount}}</div>\n        <div class="icon icon-move-menu-inverse"></div>\n    </template>\n\n    <button tabindex="0" title="Open stashed tabs"\n            @click.prevent="copyToWindow">\n        <span class="icon icon-restore"></span>\n        <span>Open</span>\n    </button>\n    <button tabindex="0" title="Open tabs and delete them from the stash"\n            @click.prevent="moveToWindow">\n        <span class="icon icon-restore-del"></span>\n        <span>Unstash</span>\n    </button>\n\n    <hr/>\n\n    <input ref="search" type="search" placeholder="Search or create group"\n            v-model="searchText"\n            @click.stop=""\n            @keypress.enter.prevent.stop="moveToSearch($event); closeMenu();"/>\n\n    <button :class="{\'selected\': searchText === \'\' || stashFolders.length === 0}"\n            :title="createTooltip"\n            @click.prevent="create">\n        <span class="icon icon-new-empty-group"></span>\n        <span>{{ createTitle }}</span>\n    </button>\n\n    <hr/>\n\n    <div :class="$style.list" tabindex="-1">\n        <button v-for="(folder, index) of stashFolders"\n                :class="{\'selected\': (index === 0 && searchText !== \'\')}"\n                :title="`Move to &quot;${friendlyFolderName(folder.title)}&quot; (hold ${altKey} to copy)`"\n                @click.prevent="moveTo($event, folder.id)"\n            >{{friendlyFolderName(folder.title)}}</button>\n    </div>\n\n    <hr/>\n\n    <button title="Delete stashed tabs and close unstashed tabs"\n            @click.prevent="remove">\n       <span class="icon icon-delete"></span>\n       <span>Delete or Close</span>\n    </button>\n</Menu>\n</template>\n\n<script lang="ts">\nimport {defineComponent} from "@vue/runtime-core";\n\nimport {altKeyName, filterMap, textMatcher} from "../util";\nimport {Model} from "../model";\nimport {Folder, NodeID, friendlyFolderName} from "../model/bookmarks";\n\nexport default defineComponent({\n    components: {\n        Menu: require(\'../components/menu.vue\').default,\n    },\n\n    props: {},\n\n    data: () => ({\n        searchText: \'\',\n    }),\n\n    inject: [\'$model\'],\n\n    computed: {\n        altKey: altKeyName,\n\n        selectedCount(): number {\n            return this.model().selection.selectedCount.value;\n        },\n\n        stashFolders(): Folder[] {\n            const bookmarks = this.model().bookmarks;\n            const stash_root = bookmarks.stash_root.value;\n            if (! stash_root) return [];\n            return filterMap(stash_root.children, id => {\n                const node = bookmarks.node(id);\n                if (node && \'children\' in node) return node as Folder;\n                return undefined;\n            }).filter(node => this.filter(node.title));\n        },\n\n        filter(): (text: string) => boolean {\n            return textMatcher(friendlyFolderName(this.searchText));\n        },\n\n        createTitle(): string {\n            if (this.searchText === \'\') return \'Move to New Group\';\n            return `Move to "${this.searchText}"`;\n        },\n\n        createTooltip(): string {\n            const copy = `(hold ${this.altKey} to copy)`;\n            if (this.searchText === \'\') return `Move to a new group ${copy}`;\n            return `Move to new group "${this.searchText} ${copy}"`;\n        },\n    },\n\n    methods: {\n        model(): Model { return (<any>this).$model as Model; },\n        attempt(fn: () => Promise<void>) { this.model().attempt(fn); },\n\n        friendlyFolderName,\n\n        closeMenu() { (<any>this.$refs.menu).close(); },\n\n        onOpenMenu() {\n            this.searchText = \'\';\n            (<HTMLElement>this.$refs.search).focus();\n        },\n\n        create(ev: MouseEvent | KeyboardEvent) { this.attempt(async() => {\n            const model = this.model();\n            let folder;\n            if (! this.searchText) {\n                folder = await model.bookmarks.createStashFolder();\n            } else {\n                const stash_root = await model.bookmarks.ensureStashRoot();\n                folder = await model.bookmarks.create({\n                    parentId: stash_root.id,\n                    title: this.searchText,\n                    index: 0,\n                });\n            }\n            this.moveTo(ev, folder.id);\n        }); },\n\n        moveToSearch(ev: MouseEvent | KeyboardEvent) {\n            if (this.searchText === \'\' || this.stashFolders.length === 0) {\n                this.create(ev);\n            } else {\n                const folder = this.stashFolders[0];\n                this.moveTo(ev, folder.id);\n            }\n        },\n\n        moveTo(ev: MouseEvent | KeyboardEvent, id: NodeID) {\n            this.attempt(() => this.model().putSelectedInFolder({\n                copy: ev.altKey,\n                toFolderId: id,\n            }));\n        },\n\n        copyToWindow() {\n            this.attempt(() => this.model().putSelectedInWindow({copy: true}));\n        },\n\n        moveToWindow() {\n            this.attempt(() => this.model().putSelectedInWindow({copy: false}));\n        },\n\n        remove() { this.attempt(async() => {\n            const model = this.model();\n            const ids = Array.from(model.selectedItems()).map(i => i.id);\n            await model.deleteItems(ids);\n        }); },\n    }\n});\n\n<\/script>\n\n<style module>\n.list {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    padding-left: 0 !important;\n    padding-right: 0 !important;\n}\n</style>\n'],sourceRoot:""}]),s.locals={list:"cJ8WCbEido8zp3kWKTl6t"},e.exports=s},8692:(e,t,n)=>{var o=n(4015),s=n(3645)(o);s.push([e.id,"\n._33rP-rsfgVq9HzwrtFc51E {\n    width: 60rem;\n    min-height: 20rem;\n    height: 67%;\n}\n._33rP-rsfgVq9HzwrtFc51E .dialog-content {\n    grid-template-columns: 1fr;\n    grid-template-rows: 0fr 1fr;\n}\n._33rP-rsfgVq9HzwrtFc51E form {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    flex-wrap: wrap;\n}\n._33rP-rsfgVq9HzwrtFc51E form > nav {\n    display: flex;\n    flex-direction: row;\n    row-gap: inherit;\n    column-gap: inherit;\n}\n._33rP-rsfgVq9HzwrtFc51E form > select, ._33rP-rsfgVq9HzwrtFc51E > form > nav { min-width: max-content;\n}\n._33rP-rsfgVq9HzwrtFc51E form > ._3N2jbJ_vtkrHDLpa_ZiEaw { flex-grow: 1; text-align: right;\n}\n@media all and (max-width: 20rem) {\n._33rP-rsfgVq9HzwrtFc51E > form > label._2ZtVBDfu8ZcsuTYHzDmt2y { display: none;\n}\n}\n._3o2il8Teuz8sVGmVmKPykV {\n    font-family: monospace;\n}\n","",{version:3,sources:["webpack://./src/tasks/export.vue"],names:[],mappings:";AAkKA;IACI,YAAY;IACZ,iBAAiB;IACjB,WAAW;AACf;AAEA;IACI,0BAA0B;IAC1B,2BAA2B;AAC/B;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,mBAAmB;IACnB,eAAe;AACnB;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,gBAAgB;IAChB,mBAAmB;AACvB;AACA,gFAAwC,sBAAsB;AAAE;AAChE,2DAAoB,YAAY,EAAE,iBAAiB;AAAE;AAErD;AACI,kEAA6B,aAAa;AAAE;AAChD;AAEA;IACI,sBAAsB;AAC1B",sourcesContent:['<template>\n    <Dialog :class="{[$style.dlg]: true, \'export-dialog\': true}"\n            @close="$emit(\'close\')">\n        <template #title><span class="group-title">Export</span></template>\n        <form :id="$style.dlg" @submit.prevent.stop="">\n            <label :for="$style.format" :class="$style.format">Format:</label>\n            <select :id="$style.format" v-model="format">\n                <option value="html-noicons">Clickable Links</option>\n                <option value="html-icons">Clickable Links with Icons</option>\n                <option value="urls-folders">List of URLs</option>\n                <option value="urls-nofolders">List of URLs (no stash names)</option>\n                <option value="markdown">Markdown</option>\n                <option value="onetab">OneTab</option>\n            </select>\n            <nav>\n                <button @click.prevent.stop="select_all">Select All</button>\n                <button class="clickme" @click.prevent.stop="copy">Copy</button>\n            </nav>\n            <label :class="$style.help">\n                <a href="https://github.com/josh-berry/tab-stash/wiki/Exporting-Tabs-from-Tab-Stash" target="_blank">About Formats...</a>\n            </label>\n        </form>\n\n        \x3c!-- HTML format --\x3e\n        <output v-if="format.startsWith(\'html-\')" ref="output" tabindex="0"\n                :for="$style.dlg">\n            <div v-for="f of folders" :key="f.id">\n                <h3>{{friendlyFolderName(f.title)}}</h3>\n                <ul>\n                    <li v-for="bm of leaves(f)" :key="bm.id">\n                        <a :href="bm.url">\n                            <img v-if="format.endsWith(\'-icons\')"\n                                 :src="faviconFor(bm)"\n                                 :srcset="faviconFor(bm) && `${faviconFor(bm)} 2x`"\n                                 referrerpolicy="no-referrer" alt="" class="icon">\n                            {{format.endsWith(\'-icons\') ? \' \' : \'\'}}\n                            {{bm.title}}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </output>\n\n        \x3c!-- Markdown format --\x3e\n        <output v-if="format == \'markdown\'" ref="output" :for="$style.dlg"\n                :class="$style.plaintext" tabindex="0">\n            <div v-for="f of folders" :key="f.id">\n                <div>## {{friendlyFolderName(f.title)}}</div>\n                <div v-for="bm of leaves(f)" :key="bm.id">- [{{quote_link_md(bm.title)}}](<a :href="bm.url">{{quote_url_md(bm.url)}}</a>)</div>\n                <div><br/></div>\n            </div>\n        </output>\n\n        \x3c!-- OneTab format --\x3e\n        <output v-if="format == \'onetab\'" ref="output" :for="$style.dlg"\n                :class="$style.plaintext" tabindex="0">\n            <div v-for="f of folders" :key="f.id">\n                <div v-for="bm of leaves(f)" :key="bm.id"><a :href="bm.url">{{bm.url}}</a> | {{bm.title}}</div>\n                <div><br/></div>\n            </div>\n        </output>\n\n        \x3c!-- List of URLs --\x3e\n        <output v-if="format.startsWith(\'urls-\')" ref="output" :for="$style.dlg"\n                :class="$style.plaintext" tabindex="0">\n            <div v-for="f of folders" :key="f.id">\n                <div v-if="format.endsWith(\'-folders\')">## {{friendlyFolderName(f.title)}}</div>\n                <div v-for="bm of leaves(f)" :key="bm.id"><a :href="bm.url">{{bm.url}}</a></div>\n                <div><br/></div>\n            </div>\n        </output>\n    </Dialog>\n</template>\n\n<script lang="ts">\nimport {defineComponent, nextTick} from \'vue\';\n\nimport {filterMap} from \'../util\';\nimport {Model} from \'../model\';\nimport {Node, Folder, friendlyFolderName, Bookmark} from \'../model/bookmarks\';\n\nconst MD_LINK_QUOTABLES_RE = /\\\\|\\[\\]|\\!\\[/g;\nconst MD_URL_QUOTABLES_RE = /\\\\|\\)/g;\n\nexport default defineComponent({\n    components: {\n        Dialog: require(\'../components/dialog.vue\').default,\n    },\n\n    inject: [\'$model\'],\n\n    emits: [\'close\'],\n\n    props: {},\n\n    computed: {\n        stash(): Node[] {\n            const m = this.model().bookmarks;\n            if (! m.stash_root.value) return [];\n            return m.childrenOf(m.stash_root.value);\n        },\n        folders(): Folder[] {\n            return this.stash.filter(t => \'children\' in t) as Folder[];\n        },\n    },\n\n    data: () => ({\n        format: \'urls-folders\',\n    }),\n\n    mounted(this: any) { this.select_all(); },\n\n    watch: {\n        format(this: any, val: string) { this.select_all(); },\n    },\n\n    methods: {\n        model(): Model { return (<any>this).$model as Model; },\n\n        friendlyFolderName,\n        leaves(folder: Folder): Bookmark[] {\n            const bookmarks = this.model().bookmarks;\n            return filterMap(folder.children, cid => {\n                const child = bookmarks.node(cid);\n                if (child && \'url\' in child) return child;\n                return undefined;\n            });\n        },\n\n        faviconFor(bm: Bookmark): string | undefined {\n            if (! bm.url) return undefined;\n            return this.model().favicons.get(bm.url)?.value?.favIconUrl || undefined;\n        },\n\n        quote_emphasis_md(text: string): string {\n            return text\n                .replace(/(^|\\s)([*_]+)(\\S)/g, (str, ws, emph, rest) =>\n                    `${ws}${emph.replace(/./g, \'\\\\$&\')}${rest}`)\n                .replace(/(\\S)([*_]+)(\\s|$)/g, (str, rest, emph, ws) =>\n                    `${rest}${emph.replace(/./g, \'\\\\$&\')}${ws}`);\n        },\n        quote_link_md(text: string): string {\n            return (<any>this).quote_emphasis_md(\n                text.replace(MD_LINK_QUOTABLES_RE, x => `\\\\${x}`));\n        },\n        quote_url_md(url: string): string {\n            return url.replace(MD_URL_QUOTABLES_RE, x => `\\\\${x}`);\n        },\n\n        copy() { document.execCommand(\'copy\'); },\n        select_all() {\n            nextTick(() => {\n                (<HTMLElement>this.$refs.output).focus();\n                window.getSelection()!\n                    .selectAllChildren(<Element>this.$refs.output);\n            });\n        }\n    },\n});\n<\/script>\n\n<style module>\n.dlg {\n    width: 60rem;\n    min-height: 20rem;\n    height: 67%;\n}\n\n.dlg :global(.dialog-content) {\n    grid-template-columns: 1fr;\n    grid-template-rows: 0fr 1fr;\n}\n\n.dlg form {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    flex-wrap: wrap;\n}\n\n.dlg form > nav {\n    display: flex;\n    flex-direction: row;\n    row-gap: inherit;\n    column-gap: inherit;\n}\n.dlg form > select, .dlg > form > nav { min-width: max-content; }\n.dlg form > .help { flex-grow: 1; text-align: right; }\n\n@media all and (max-width: 20rem) {\n    .dlg > form > label.format { display: none; }\n}\n\n.plaintext {\n    font-family: monospace;\n}\n</style>\n'],sourceRoot:""}]),s.locals={dlg:"_33rP-rsfgVq9HzwrtFc51E",help:"_3N2jbJ_vtkrHDLpa_ZiEaw",format:"_2ZtVBDfu8ZcsuTYHzDmt2y",plaintext:"_3o2il8Teuz8sVGmVmKPykV"},e.exports=s},6406:(e,t,n)=>{var o=n(4015),s=n(3645)(o);s.push([e.id,"\n._19FT1wbbutb88i0bJCzyti {\n    width: 60rem;\n    min-height: 20rem;\n    height: 67%;\n}\n._19FT1wbbutb88i0bJCzyti .dialog-content {\n    grid-template-columns: 1fr;\n    grid-template-rows: 0fr 1fr;\n}\n._19FT1wbbutb88i0bJCzyti ._1oyF6u2TxkP1oRFA6fSlFc {\n    cursor: text;\n}\n._3BIDmHCmD3G0Jvk21x6TqC {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    flex-wrap: wrap;\n}\n","",{version:3,sources:["webpack://./src/tasks/import.vue"],names:[],mappings:";AA0EA;IACI,YAAY;IACZ,iBAAiB;IACjB,WAAW;AACf;AAEA;IACI,0BAA0B;IAC1B,2BAA2B;AAC/B;AAEA;IACI,YAAY;AAChB;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,mBAAmB;IACnB,eAAe;AACnB",sourcesContent:['<template>\n  <ProgressDialog v-if="progress" :progress="progress" :cancel="cancel"/>\n  <Dialog v-else :class="{[$style.dlg]: true, \'import-dialog\': true}"\n          @close="$emit(\'close\')">\n    <template #title><span class="group-title">Import</span></template>\n    <label for="data">\n      Paste anything containing links or URLs here.  Links and URLs will be\n      extracted and converted into bookmarks in your stash.\n    </label>\n    <div ref="data" contenteditable="true" id="data"\n        :class="{\'input\': true, [$style.input]: true}" />\n    <form :class="$style.split_mode">\n      <label for="splitOn">Split tabs into different groups on:</label>\n      <select id="splitOn" v-model="splitOn">\n        <option value="p+h">Paragraphs and Headers</option>\n        <option value="h">Headers</option>\n        <option value="">Nothing [all in one group]</option>\n      </select>\n    </form>\n    <template #buttons>\n        <button class="clickme" @click="start">Import</button>\n    </template>\n  </Dialog>\n</template>\n\n<script lang="ts">\nimport {defineComponent} from \'vue\';\nimport {ParseOptions, parse, importURLs} from \'./import\';\nimport { TaskMonitor } from \'../util\';\nimport {Model} from \'../model\';\n\nexport default defineComponent({\n    components: {\n        Dialog: require(\'../components/dialog.vue\').default,\n        ProgressDialog: require(\'../components/progress-dialog.vue\').default,\n    },\n\n    emits: [\'close\'],\n\n    data: () => ({\n        cancel: undefined,\n        progress: undefined,\n        splitOn: \'p+h\' as ParseOptions[\'splitOn\'],\n    }),\n\n    inject: [\'$model\'],\n\n    mounted() { (<HTMLElement>this.$refs.data).focus(); },\n\n    methods: {\n        model(): Model { return (<any>this).$model as Model },\n\n        start() { this.model().attempt(async () => {\n            const groups = parse(\n                this.$refs.data as Element, this.model(), {splitOn: this.splitOn});\n\n            try {\n                const task = TaskMonitor.run(tm => importURLs(this.model(), groups, tm));\n\n                (<any>this).cancel = () => task.cancel();\n                (<any>this).progress = task.progress;\n                await task;\n\n            } finally {\n                (<any>this).cancel = undefined;\n                (<any>this).progress = undefined;\n                this.$emit(\'close\');\n            }\n        }); }\n    }\n});\n<\/script>\n\n<style module>\n.dlg {\n    width: 60rem;\n    min-height: 20rem;\n    height: 67%;\n}\n\n.dlg :global(.dialog-content) {\n    grid-template-columns: 1fr;\n    grid-template-rows: 0fr 1fr;\n}\n\n.dlg .input {\n    cursor: text;\n}\n\n.split_mode {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    flex-wrap: wrap;\n}\n</style>\n'],sourceRoot:""}]),s.locals={dlg:"_19FT1wbbutb88i0bJCzyti",input:"_1oyF6u2TxkP1oRFA6fSlFc",split_mode:"_3BIDmHCmD3G0Jvk21x6TqC"},e.exports=s},4649:(e,t)=>{"use strict";t.Z={}},9701:(e,t)=>{"use strict";t.Z={emits:["action"],props:{name:String,tooltip:String},methods:{act:function(e){this.$emit("action",e)}}}},8175:(e,t,n)=>{"use strict";const o=n(357);t.Z=(0,o.defineComponent)({components:{ModalBackdrop:n(7227).Z},emits:["close"],props:{backdropClass:Object,preventClosing:Boolean},inheritAttrs:!1,methods:{close(){this.preventClosing||this.$emit("close")}}})},2553:(e,t,n)=>{"use strict";const o=n(357),s=n(6238),i=(0,o.reactive)({dragging:void 0,dropping:void 0,recentDropTargets:[],dropTask:void 0,ghostStyle:void 0});t.Z=(0,o.defineComponent)({props:{is:String,itemIs:String,itemKey:(0,s.required)(String),itemClass:Function,accepts:[String,Array],modelValue:(0,s.required)(Array),drag:(0,s.required)(Function),drop:(0,s.required)(Function),mimicWidth:Boolean,mimicHeight:Boolean},data:()=>({listEls:[],modelSnapshot:void 0}),beforeUpdate(){this.listEls=[]},computed:{draggingIndex(){var e;if((null===(e=i.dragging)||void 0===e?void 0:e.parent)===this)return i.dragging.index},ghostIndex(){return i.dropping?i.dropping.parent===this?i.dropping.index:void 0:this.draggingIndex},ghostStyle(){const e=i.ghostStyle;if(!e)return;let t="";return this.mimicWidth&&(t+=`width: ${e.width}px; `),this.mimicHeight&&(t+=`height: ${e.height}px; `),t||void 0},displayItems(){var e;return null!==(e=this.modelSnapshot)&&void 0!==e?e:this.modelValue}},methods:{enableDrag(e){const t=this.listEls[e];t&&(t.draggable=!0)},disableDrag(e){const t=this.listEls[e];t&&(t.draggable=!1)},itemDragStart(e,t){this.disableDrag(t),e.stopPropagation(),i.dropTask?e.preventDefault():(this.drag({dataTransfer:e.dataTransfer,fromIndex:t,value:this.modelValue[t]}),setTimeout((()=>{const e=this.listEls[t];if(!e)return;const n=e.getBoundingClientRect();i.dragging={parent:this,index:t},i.dropping={parent:this,index:t},i.ghostStyle={width:n.width,height:n.height},i.recentDropTargets=[i.dropping]})))},itemDragEnd(){i.dropTask||(i.dragging=void 0,i.dropping=void 0,i.ghostStyle=void 0,i.recentDropTargets=[])},itemDragEnter(e,t){this.allowDropHere(e)&&this.moveGhost(t)},itemDragOver(e){this.allowDropHere(e)},parentDragEnter(e){this.allowDropHere(e)&&(e.target&&e.target!==this.$refs.top||this.moveGhost(this.displayItems.length))},ghostDragEnter(e){e.preventDefault(),e.stopPropagation(),i.recentDropTargets.shift()},ghostDragOver(e){e.preventDefault(),e.stopPropagation()},allowDropHere(e){if(!e.dataTransfer)return!1;const t=e.dataTransfer.types;if(this.accepts instanceof Array){if(!t.find((e=>this.accepts.includes(e))))return!1}else{if(!this.accepts)return!1;if(!t.includes(this.accepts))return!1}return e.preventDefault(),e.stopPropagation(),!0},moveGhost(e){const t={parent:this,index:e};if(void 0!==this.ghostIndex&&this.ghostIndex<=e&&t.index++,t.index=Math.min(t.index,this.displayItems.length),!i.recentDropTargets.find((e=>e.parent===t.parent&&e.index===t.index)))for(i.dropping=t,i.recentDropTargets.push(t);i.recentDropTargets.length>2;)i.recentDropTargets.shift()},doDrop(e){var t,n,s,r;if(!this.allowDropHere(e))return;if(!i.dropping)return;e.stopPropagation();const a=((null===(t=i.dragging)||void 0===t?void 0:t.parent)===i.dropping.parent&&(null===(n=i.dragging)||void 0===n||n.index,i.dropping.index),0);console.assert((null===(s=i.dropping)||void 0===s?void 0:s.parent)===this);const l={dataTransfer:e.dataTransfer,toIndex:i.dropping.index-a};i.dropTask=l,(null===(r=i.dragging)||void 0===r?void 0:r.parent)&&(i.dragging.parent.modelSnapshot=Array.from(i.dragging.parent.modelValue)),this.modelSnapshot=Array.from(this.modelValue),this.drop(l).then((()=>(0,o.nextTick)())).catch(console.error).finally((()=>{var e;(null===(e=i.dragging)||void 0===e?void 0:e.parent)&&(i.dragging.parent.modelSnapshot=void 0),i.dragging=void 0,i.dropping=void 0,i.dropTask=void 0,i.recentDropTargets=[],i.ghostStyle=void 0,this.modelSnapshot=void 0}))}}})},5394:(e,t,n)=>{"use strict";const o=n(357),s=n(6238);t.Z=(0,o.defineComponent)({props:{edit:Function,value:String,defaultValue:(0,s.required)(String)},data:()=>({state:"displaying",dirtyValue:void 0}),computed:{displayValue(){var e,t;return null!==(t=null!==(e=this.dirtyValue)&&void 0!==e?e:this.value)&&void 0!==t?t:this.defaultValue},editableValue(){var e,t;return null!==(t=null!==(e=this.dirtyValue)&&void 0!==e?e:this.value)&&void 0!==t?t:""}},watch:{value(){this.dirtyValue=void 0}},methods:{begin(){this.edit&&(this.state="editing",(0,o.nextTick)().then((()=>{this.$refs.input.focus()})))},cancel(){"editing"===this.state&&(this.state="displaying")},commit(){if("editing"!==this.state)return;const e=this.$refs.input;this.edit&&e.value!==this.value?(this.dirtyValue=e.value,this.state="committing",this.edit(this.dirtyValue).catch(console.log).finally(o.nextTick).finally((()=>{this.dirtyValue=void 0,this.state="displaying"}))):this.cancel()}}})},8741:(e,t,n)=>{"use strict";const o=n(357);t.Z=(0,o.defineComponent)({props:{src:String,defaultClass:Object}})},1167:(e,t,n)=>{"use strict";const o=n(357);t.Z=(0,o.defineComponent)({components:{Teleport:o.Teleport},props:{name:String,summaryClass:String,modalClass:String,inPlace:Boolean,persist:Boolean},data:()=>({viewport:void 0,origin:void 0,vertical:"below",horizontal:"left",isOpen:!1}),computed:{vertical_bound(){var e;return"below"===this.vertical?`padding-top: ${(null===(e=this.origin)||void 0===e?void 0:e.bottom)||0}px;`:`padding-bottom: ${this.viewport.height-this.origin.top}px;`},horizontal_bound(){var e;return"left"===this.horizontal?`padding-left: ${null===(e=this.origin)||void 0===e?void 0:e.left}px;`:`padding-right: ${this.viewport.width-this.origin.right}px;`},bounds(){return`${this.horizontal_bound} ${this.vertical_bound}`}},methods:{updatePosition(){const e=this.$refs.summary;this.viewport=document.body.getBoundingClientRect();const t=e.getBoundingClientRect(),n=this.viewport.width/2,o=this.viewport.height/2;this.origin=t,this.vertical=t.bottom<o?"below":"above",this.horizontal=t.right<n?"left":"right"},open(){this.updatePosition(),this.isOpen=!0,this.$nextTick((()=>{this.$refs.menu.focus(),this.$emit("open")}))},close(){this.$refs.summary.focus(),this.$nextTick((()=>{this.isOpen=!1,this.$emit("close"),this.$refs.summary.blur()}))},onToggle(){this.$refs.details.open?this.open():this.close()},onFocusOut(){const e=this.$refs.menu,t=this.$refs.bounds;e.closest(".menu-bounds:focus-within")!==t&&this.close()}}})},7763:(e,t,n)=>{"use strict";const o=n(357);t.Z=(0,o.defineComponent)({mounted(){this.$refs.modal.focus()}})},4643:(e,t,n)=>{"use strict";const o=n(357);t.Z=(0,o.defineComponent)({components:{ButtonBox:n(5735).Z,Button:n(4398).Z},emits:["activate","dismiss"],props:{inactive:Boolean},data:()=>({dismissed:!1}),methods:{activate(e){this.$emit("activate")},dismiss(e){this.$emit("dismiss"),this.dismissed=!0}}})},993:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(357),i=n(357),r=(0,i.createElementVNode)("summary",null,"Get Help With This Crash",-1),a=(0,i.createElementVNode)("p",null,"Here are a few options that might help. Crash details are shown below for easy referenceâ€”they will be cleared once you close this notification.",-1),l=["onClick"],d=["onClick"],c=["onClick"],u=(0,i.createElementVNode)("summary",null,"Hide Crash Reports",-1),h=(0,i.createElementVNode)("p",null,"If you're seeing too many crash reports, you can temporarily hide them:",-1),m=(0,i.createElementVNode)("p",null,"Crash reports can be turned on again in settings.",-1),f=n(2348),p=o(n(3150)),v=n(357),g=(0,v.ref)("<Unknown Browser>");p.default.runtime.getBrowserInfo&&p.default.runtime.getBrowserInfo().then((e=>{g.value=`${e.vendor} ${e.name} ${e.version} ${e.buildID}`}));const b=(0,v.ref)("<Unknown Platform>");p.default.runtime.getPlatformInfo&&p.default.runtime.getPlatformInfo().then((e=>{b.value=`${e.os} ${e.arch}`}));const w=(0,v.ref)("<Unknown Extension>");p.default.management.getSelf&&p.default.management.getSelf().then((e=>{w.value=`${e.name} ${e.version} (${e.installType})`})),t.default=(0,s.defineComponent)({setup(e){const t=n(7912).Z,o=(0,v.inject)("$model"),s=(0,v.ref)(null),y=()=>(0,f.logErrorsFrom)((()=>p.default.tabs.create({url:"https://josh-berry.github.io/tab-stash/support.html"}))),_=()=>{const e=f.errorLog[0].summary.replace(/[0-9]+/g,"").replace(/:\s+\S+$/,"").replace(/\S+:\S+/g,"").replace(/\S+\.\S+/g,"").replace(/"[^"]*"/g,"").replace(/`[^`]*`/g,"").replace(/\S+\@\S+/g,""),t=`https://github.com/josh-berry/tab-stash/issues?q=is%3Aissue+${encodeURIComponent(e)}`;(0,f.logErrorsFrom)((()=>p.default.tabs.create({url:t})))},k=async()=>{const e=s.value;e.focus(),window.getSelection().selectAllChildren(e),document.execCommand("copy")},A=e=>(0,f.logErrorsFrom)((async()=>{await o.options.local.set({hide_crash_reports_until:Date.now()+e}),(0,f.clearErrorLog)()}));return(e,n)=>((0,i.openBlock)(),(0,i.createBlock)((0,i.unref)(t),{inactive:"",onDismiss:(0,i.unref)(f.clearErrorLog)},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(e.$style.msg)},"Oops! Something went wrong. Tab Stash will try to recover automatically.",2),(0,i.createElementVNode)("details",{class:(0,i.normalizeClass)(e.$style.details),onClick:n[0]||(n[0]=(0,i.withModifiers)((()=>{}),["stop"]))},[r,a,(0,i.createElementVNode)("p",null,[(0,i.createElementVNode)("button",{onClick:(0,i.withModifiers)(y,["stop"])},"Show Troubleshooting Guide",8,l),(0,i.createElementVNode)("button",{onClick:(0,i.withModifiers)(_,["stop"])},"Search for Similar Issues",8,d),(0,i.createElementVNode)("button",{onClick:(0,i.withModifiers)(k,["stop"])},"Copy Crash Details",8,c)]),(0,i.createElementVNode)("p",null,[(0,i.createElementVNode)("output",{ref:(e,t)=>{t.err_log_el=e,s.value=e},class:(0,i.normalizeClass)(e.$style.err_details_list)},[(0,i.createElementVNode)("p",{class:(0,i.normalizeClass)(e.$style.environment)},[(0,i.createElementVNode)("div",null,"Browser: "+(0,i.toDisplayString)(g.value)+" ("+(0,i.toDisplayString)(b.value)+")",1),(0,i.createElementVNode)("div",null,"Extension: "+(0,i.toDisplayString)(w.value),1)],2),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(f.errorLog),(t=>((0,i.openBlock)(),(0,i.createElementBlock)("p",null,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(e.$style.err_summary)},(0,i.toDisplayString)(t.summary),3),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(e.$style.err_details)},(0,i.toDisplayString)(t.details),3)])))),256))],2)])],2),(0,i.createElementVNode)("details",{class:(0,i.normalizeClass)(e.$style.details),onClick:n[5]||(n[5]=(0,i.withModifiers)((()=>{}),["stop"]))},[u,h,(0,i.createElementVNode)("p",null,[(0,i.createElementVNode)("button",{onClick:n[1]||(n[1]=(0,i.withModifiers)((e=>A(3e5)),["stop"]))},"for 5 minutes"),(0,i.createElementVNode)("button",{onClick:n[2]||(n[2]=(0,i.withModifiers)((e=>A(36e5)),["stop"]))},"for 1 hour"),(0,i.createElementVNode)("button",{onClick:n[3]||(n[3]=(0,i.withModifiers)((e=>A(864e5)),["stop"]))},"for 1 day"),(0,i.createElementVNode)("button",{onClick:n[4]||(n[4]=(0,i.withModifiers)((e=>A(6048e5)),["stop"]))},"for 1 week")]),m],2)])),_:1},8,["onDismiss"]))}})},1251:(e,t,n)=>{"use strict";const o=n(357);t.Z=(0,o.defineComponent)({components:{Dialog:n(5792).Z,ProgressItem:n(1412).Z},emits:["close"],props:{cancel:Function,progress:Object},data:()=>({cancelled:!1}),methods:{doCancel(){this.cancel&&(this.cancel(),this.cancelled=!0)}}})},8679:(e,t,n)=>{"use strict";const o=n(357),s=n(6238);t.Z=(0,o.defineComponent)({name:"Self",props:{progress:(0,s.required)(Object)}})},701:(e,t,n)=>{"use strict";const o=n(357),s=n(6238);t.Z=(0,o.defineComponent)({components:{Button:n(4398).Z,ButtonBox:n(5735).Z,ItemIcon:n(2517).Z},inject:["$model"],props:{bookmark:(0,s.required)(Object)},computed:{altkey:s.altKeyName,bgKey:s.bgKeyName,targetWindow(){return this.model().tabs.targetWindow.value},related_tabs(){if(!this.bookmark.url)return[];const e=this.model().tabs.tabsWithURL(this.bookmark.url);return Array.from(e)},hasOpenTab(){return!!this.related_tabs.find((e=>!e.hidden&&e.windowId===this.targetWindow))},hasActiveTab(){return!!this.related_tabs.find((e=>e.active&&e.windowId===this.targetWindow))},favicon(){return this.bookmark.url?this.model().favicons.get(this.bookmark.url):null}},methods:{model(){return this.$model},select(e){this.model().attempt((async()=>{await this.model().selection.toggleSelectFromEvent(e,this.model().bookmarks,this.bookmark)}))},open(e){this.model().attempt((async()=>{if(this.$refs.a.blur(),this.model().selection.selectedCount.value>0)return void this.select(e);if(!this.bookmark.url)return;const t=(0,s.bgKeyPressed)(e);await this.model().restoreTabs([this.bookmark.url],{background:t})}))},remove(){this.model().attempt((async()=>{await this.model().deleteBookmark(this.bookmark)}))},openRemove(e){this.model().attempt((async()=>{if(!this.bookmark.url)return;const t=(0,s.bgKeyPressed)(e);await this.model().restoreTabs([this.bookmark.url],{background:t}),await this.model().deleteBookmark(this.bookmark)}))}}})},4339:(e,t,n)=>{"use strict";const o=n(357),s=n(6238),i="application/x-tab-stash-folder-id";t.Z=(0,o.defineComponent)({components:{DndList:n(59).Z,Folder:n(6187).Z},inject:["$model"],props:{parentFolder:(0,s.required)(Object)},computed:{accepts:()=>i,children(){return this.model().bookmarks.childrenOf(this.parentFolder)}},methods:{model(){return this.$model},drag(e){e.dataTransfer.setData(i,e.value.id)},async drop(e){const t=e.dataTransfer.getData(i);await this.model().bookmarks.move(t,this.parentFolder.id,e.toIndex)},setCollapsed(e){for(const t of this.$refs.folders)t.collapsed=e}}})},1120:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(3150)),i=n(357),r=n(6238),a=n(2726),l=n(2496),d=["application/x-tab-stash-items"];t.default=(0,i.defineComponent)({components:{Button:n(4398).Z,ButtonBox:n(5735).Z,DndList:n(59).Z,EditableLabel:n(9004).Z,Bookmark:n(7403).Z},inject:["$model"],props:{folder:(0,r.required)(Object),metadata:(0,r.required)(Object)},data:()=>({showFiltered:!1}),computed:{altKey:r.altKeyName,bgKey:r.bgKeyName,accepts:()=>d,children(){return this.model().bookmarks.childrenOf(this.folder)},collapsed:{get(){var e;return!!(null===(e=this.metadata.value)||void 0===e?void 0:e.collapsed)},set(e){this.model().bookmark_metadata.setCollapsed(this.metadata.key,e)}},defaultTitle(){return null!==(0,l.getDefaultFolderNameISODate)(this.folder.title)?(0,l.friendlyFolderName)(this.folder.title):`Saved ${new Date(this.folder.dateAdded||0).toLocaleString()}`},nonDefaultTitle(){return null!==(0,l.getDefaultFolderNameISODate)(this.folder.title)?void 0:this.folder.title},validChildren(){return this.children.filter((e=>this.isValidChild(e)))},visibleChildren(){return this.validChildren.filter((e=>e.$visible))},filterCount(){return this.validChildren.length-this.visibleChildren.length},selectedCount(){return this.model().selection.selectedCount.value}},methods:{model(){return this.$model},attempt(e){this.model().attempt(e)},childClasses(e){return{hidden:!(this.isValidChild(e)&&(this.showFiltered||e.$visible))}},isValidChild:e=>"url"in e,stash(e){const t=this.model(),n=t.tabs.targetWindow.value;n&&t.attempt((async()=>await t.putItemsInFolder({items:(0,a.copyIf)(e.altKey,t.stashableTabsInWindow(n)),toFolderId:this.folder.id})))},async stashOne(e){this.attempt((async()=>{const t=this.model().tabs.activeTab();t&&await this.model().putItemsInFolder({items:(0,a.copyIf)(e.altKey,[t]),toFolderId:this.folder.id})}))},move(e){const t=this.model();t.tabs.targetWindow.value&&t.attempt((()=>t.putSelectedInFolder({copy:e.altKey,toFolderId:this.folder.id})))},async restoreAll(e){this.attempt((async()=>{await this.model().restoreTabs(this.validChildren.map((e=>e.url)),{background:(0,r.bgKeyPressed)(e)})}))},async remove(){this.attempt((async()=>{await this.model().deleteBookmarkTree(this.folder.id)}))},async restoreAndRemove(e){this.attempt((async()=>{const t=(0,r.bgKeyPressed)(e);await this.model().restoreTabs(this.validChildren.map((e=>e.url)),{background:t}),await this.model().deleteBookmarkTree(this.folder.id)}))},async rename(e){this.attempt((async()=>{if(""===e){if(null!==(0,l.getDefaultFolderNameISODate)(this.folder.title))return;e=(0,l.genDefaultFolderName)(new Date(this.folder.dateAdded||0))}await s.default.bookmarks.update(this.folder.id,{title:e})}))},drag(e){const t=e.value.$selected?Array.from(this.model().selectedItems()):[e.value];e.dataTransfer.setData("application/x-tab-stash-items",JSON.stringify(t))},async drop(e){const t=e.dataTransfer.getData("application/x-tab-stash-items"),n=JSON.parse(t),o=this.model();await o.attempt((()=>this.model().putItemsInFolder({items:n,toFolderId:this.folder.id,toIndex:e.toIndex})))}}})},9302:function(e,t,n){"use strict";var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,s){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,s,(t=e[n](t)).done,t.value)}))}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(3150)),r=n(357),a=n(3770),l=n(6238),d=n(5879),c=n(8837);t.default=(0,r.defineComponent)({components:{SelectionMenu:n(5663).Z,Button:n(4398).Z,ButtonBox:n(5735).Z,ExportDialog:n(2714).Z,Folder:n(6187).Z,FolderList:n(8448).Z,ImportDialog:n(1151).Z,Menu:n(5052).Z,Notification:n(7912).Z,OopsNotification:n(6026).Z,ProgressDialog:n(9522).Z,Window:n(6722).Z},props:{my_version:(0,l.required)(String)},data:()=>({collapsed:!1,searchText:"",dialog:void 0}),computed:{stash_root_warning(){return this.model().bookmarks.stash_root_warning.value},tabs(){const e=this.model().tabs;if(void 0===e.targetWindow.value)return[];const t=e.window(e.targetWindow.value);return t?e.tabsIn(t):[]},stash_root(){return this.model().bookmarks.stash_root.value},stash_groups(){var e;return(null===(e=this.stash_root)||void 0===e?void 0:e.children)?this.model().bookmarks.childrenOf(this.stash_root).filter((e=>"children"in e)):[]},recently_updated(){const e=this.model().options.local.state.last_notified_version;if(e===this.my_version)return;const t=(0,l.parseVersion)(this.my_version),n=e?(0,l.parseVersion)(e):[];return t[0]==n[0]&&t[1]==n[1]?"fixes":"features"},recently_deleted(){return this.model().deleted_items.state.recentlyDeleted},selection_active(){return this.model().selection.selectedCount.value>0},counts(){let e=0,t=0;for(const n of this.stash_groups)e+=n.children.length,t++;return{tabs:e,groups:t}},search_placeholder(){const e=this.counts,t=1==e.groups?"group":"groups",n=1==e.tabs?"tab":"tabs";return`Search ${e.groups} ${t}, ${e.tabs} ${n}`},curWindowMetadata(){return this.model().bookmark_metadata.get(d.CUR_WINDOW_MD_ID)},showCrashReport(){return this.model().options.showCrashReport.value}},mounted(){document.documentElement.classList.contains("view-popup")&&this.$refs.search.focus()},watch:{searchText(e){this.model().setFilter(e)}},methods:{pageref:a.pageref,model(){},collapseAll(){this.collapsed=!this.collapsed;const e=this.model().bookmark_metadata;e.setCollapsed(d.CUR_WINDOW_MD_ID,this.collapsed);for(const t of this.stash_groups)e.setCollapsed(t.id,this.collapsed)},onEscape(){this.searchText?this.searchText="":this.deselectAll()},deselectAll(){this.model().selection.clearSelection().catch(console.error)},showOptions(){i.default.runtime.openOptionsPage().catch(console.log)},go(e){window.location.href=(0,a.pageref)(e)},hideWhatsNew(){this.model().options.local.set({last_notified_version:this.my_version})},showExportDialog(){this.dialog={class:"ExportDialog",props:{}}},async fetchMissingFavicons(){this.model().attempt((async()=>{var e,t;const n=this.model().favicons,s=this.model().bookmarks.urlsInStash();for(const e of s){const t=n.get(e);t&&t.value&&s.delete(e)}const i=l.TaskMonitor.run_iter((e=>(0,c.fetchInfoForSites)(s,e)));this.dialog={class:"ProgressDialog",props:{progress:i.progress,cancel:()=>i.cancel()}};try{try{for(var r,a=o(i);!(r=await a.next()).done;){const e=r.value;e.favIconUrl&&n.set(e.originalUrl,e.favIconUrl)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=a.return)&&await t.call(a)}finally{if(e)throw e.error}}}finally{this.dialog=void 0}}))}}})},1246:(e,t,n)=>{"use strict";const o=n(6252),s=n(6238),i=n(2496);t.Z=(0,o.defineComponent)({components:{Menu:n(5052).Z},props:{},data:()=>({searchText:""}),inject:["$model"],computed:{altKey:s.altKeyName,selectedCount(){return this.model().selection.selectedCount.value},stashFolders(){const e=this.model().bookmarks,t=e.stash_root.value;return t?(0,s.filterMap)(t.children,(t=>{const n=e.node(t);if(n&&"children"in n)return n})).filter((e=>this.filter(e.title))):[]},filter(){return(0,s.textMatcher)((0,i.friendlyFolderName)(this.searchText))},createTitle(){return""===this.searchText?"Move to New Group":`Move to "${this.searchText}"`},createTooltip(){const e=`(hold ${this.altKey} to copy)`;return""===this.searchText?`Move to a new group ${e}`:`Move to new group "${this.searchText} ${e}"`}},methods:{model(){return this.$model},attempt(e){this.model().attempt(e)},friendlyFolderName:i.friendlyFolderName,closeMenu(){this.$refs.menu.close()},onOpenMenu(){this.searchText="",this.$refs.search.focus()},create(e){this.attempt((async()=>{const t=this.model();let n;if(this.searchText){const e=await t.bookmarks.ensureStashRoot();n=await t.bookmarks.create({parentId:e.id,title:this.searchText,index:0})}else n=await t.bookmarks.createStashFolder();this.moveTo(e,n.id)}))},moveToSearch(e){if(""===this.searchText||0===this.stashFolders.length)this.create(e);else{const t=this.stashFolders[0];this.moveTo(e,t.id)}},moveTo(e,t){this.attempt((()=>this.model().putSelectedInFolder({copy:e.altKey,toFolderId:t})))},copyToWindow(){this.attempt((()=>this.model().putSelectedInWindow({copy:!0})))},moveToWindow(){this.attempt((()=>this.model().putSelectedInWindow({copy:!1})))},remove(){this.attempt((async()=>{const e=this.model(),t=Array.from(e.selectedItems()).map((e=>e.id));await e.deleteItems(t)}))}}})},3104:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(357),i=o(n(3150)),r=n(6238),a=n(2726);t.default=(0,s.defineComponent)({components:{Button:n(4398).Z,ButtonBox:n(5735).Z,ItemIcon:n(2517).Z},inject:["$model"],props:{tab:(0,r.required)(Object)},computed:{altKey:r.altKeyName,bgKey:r.bgKeyName,targetWindow(){return this.model().tabs.targetWindow.value},isActive(){return this.tab.active&&this.tab.windowId===this.targetWindow}},methods:{model(){return this.$model},attempt(e){this.model().attempt(e)},select(e){this.attempt((async()=>{await this.model().selection.toggleSelectFromEvent(e,this.model().tabs,this.tab)}))},stash(e){this.attempt((async()=>{const t=this.model();await t.putItemsInFolder({items:(0,a.copyIf)(e.altKey,[this.tab]),toFolderId:(await t.ensureRecentUnnamedFolder()).id})}))},open(e){this.attempt((async()=>{this.$refs.a.blur(),this.model().selection.selectedCount.value>0?this.select(e):await i.default.tabs.update(this.tab.id,{active:!0})}))},remove(){this.attempt((async()=>{await this.model().tabs.remove([this.tab.id])}))}}})},275:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(3150)),i=n(357),r=n(6238),a=n(2726),l=["application/x-tab-stash-items"];t.default=(0,i.defineComponent)({components:{Button:n(4398).Z,ButtonBox:n(5735).Z,DndList:n(59).Z,EditableLabel:n(9004).Z,Tab:n(373).Z,Bookmark:n(7403).Z},inject:["$model"],props:{tabs:(0,r.required)(Array),metadata:(0,r.required)(Object)},data:()=>({showFiltered:!1}),computed:{altKey:r.altKeyName,accepts:()=>l,title(){return this.model().options.sync.state.show_all_open_tabs?"Open Tabs":"Unstashed Tabs"},collapsed:{get(){var e;return!!(null===(e=this.metadata.value)||void 0===e?void 0:e.collapsed)},set(e){this.model().bookmark_metadata.setCollapsed(this.metadata.key,e)}},validChildren(){return this.tabs.filter((e=>this.isValidChild(e)))},visibleChildren(){return this.validChildren.filter((e=>e.$visible))},filteredCount(){return this.validChildren.length-this.visibleChildren.length},selectedCount(){return this.model().selection.selectedCount.value}},methods:{model(){return this.$model},attempt(e){this.model().attempt(e)},childClasses(e){return{hidden:!(this.isValidChild(e)&&(this.showFiltered||e.$visible))}},isValidChild(e){const t=this.model();return!e.hidden&&!e.pinned&&t.isURLStashable(e.url)&&(t.options.sync.state.show_all_open_tabs||!this.isItemStashed(e))},isItemStashed(e){var t;if(!e.url)return!1;const n=this.model().bookmarks,o=null===(t=n.stash_root.value)||void 0===t?void 0:t.id;return void 0!==o&&!!Array.from(n.bookmarksWithURL(e.url)).find((e=>n.isNodeInFolder(e,o)))},async newGroup(){this.attempt((async()=>{await this.model().bookmarks.createStashFolder()}))},async stash(e){this.attempt((async()=>{0!==this.visibleChildren.length&&await this.model().putItemsInFolder({items:(0,a.copyIf)(e.altKey,this.visibleChildren),toFolderId:(await this.model().bookmarks.createStashFolder()).id})}))},async remove(){this.attempt((async()=>{await this.model().tabs.remove(this.visibleChildren.map((e=>e.id)))}))},async removeStashed(){this.attempt((async()=>{if(!this.isItemStashed)throw new Error("isItemStashed not provided to tab folder");await this.model().hideOrCloseStashedTabs(this.tabs.filter((e=>e&&!e.hidden&&!e.pinned&&this.isItemStashed(e))).map((e=>e.id)))}))},async removeOpen(e){this.attempt((async()=>{if(!this.isItemStashed)throw new Error("isItemStashed not provided to tab folder");if(e.altKey){const e=this.tabs.filter((e=>e&&e.hidden&&this.isItemStashed(e)));await this.model().tabs.remove((0,r.filterMap)(e,(e=>null==e?void 0:e.id)))}else{const e=this.tabs.filter((e=>!e.hidden&&!e.pinned&&this.isItemStashed(e))).map((e=>e.id)),t=this.tabs.filter((e=>!e.hidden&&!e.pinned&&!this.isItemStashed(e))).map((e=>e.id));await this.model().tabs.refocusAwayFromTabs(e.concat(t)),this.model().hideOrCloseStashedTabs(e).catch(console.log),s.default.tabs.remove(t).catch(console.log)}}))},copyToWindow(){this.attempt((()=>this.model().putSelectedInWindow({copy:!0})))},moveToWindow(){this.attempt((()=>this.model().putSelectedInWindow({copy:!1})))},moveToNewGroup(e){this.attempt((async()=>{const t=await this.model().bookmarks.createStashFolder();await this.model().putSelectedInFolder({copy:e.altKey,toFolderId:t.id})}))},drag(e){const t=e.value.$selected?Array.from(this.model().selectedItems()):[e.value];e.dataTransfer.setData("application/x-tab-stash-items",JSON.stringify(t))},async drop(e){const t=e.dataTransfer.getData("application/x-tab-stash-items"),n=JSON.parse(t),o=this.model();await o.attempt((()=>o.putItemsInWindow({items:n,toIndex:e.toIndex})))}}})},6996:(e,t,n)=>{"use strict";const o=n(357),s=n(6238),i=n(2496),r=/\\|\[\]|\!\[/g,a=/\\|\)/g;t.Z=(0,o.defineComponent)({components:{Dialog:n(5792).Z},inject:["$model"],emits:["close"],props:{},computed:{stash(){const e=this.model().bookmarks;return e.stash_root.value?e.childrenOf(e.stash_root.value):[]},folders(){return this.stash.filter((e=>"children"in e))}},data:()=>({format:"urls-folders"}),mounted(){this.select_all()},watch:{format(e){this.select_all()}},methods:{model(){return this.$model},friendlyFolderName:i.friendlyFolderName,leaves(e){const t=this.model().bookmarks;return(0,s.filterMap)(e.children,(e=>{const n=t.node(e);if(n&&"url"in n)return n}))},faviconFor(e){var t,n;if(e.url)return(null===(n=null===(t=this.model().favicons.get(e.url))||void 0===t?void 0:t.value)||void 0===n?void 0:n.favIconUrl)||void 0},quote_emphasis_md:e=>e.replace(/(^|\s)([*_]+)(\S)/g,((e,t,n,o)=>`${t}${n.replace(/./g,"\\$&")}${o}`)).replace(/(\S)([*_]+)(\s|$)/g,((e,t,n,o)=>`${t}${n.replace(/./g,"\\$&")}${o}`)),quote_link_md(e){return this.quote_emphasis_md(e.replace(r,(e=>`\\${e}`)))},quote_url_md:e=>e.replace(a,(e=>`\\${e}`)),copy(){document.execCommand("copy")},select_all(){(0,o.nextTick)((()=>{this.$refs.output.focus(),window.getSelection().selectAllChildren(this.$refs.output)}))}}})},5872:(e,t,n)=>{"use strict";const o=n(357),s=n(6439),i=n(6238);t.Z=(0,o.defineComponent)({components:{Dialog:n(5792).Z,ProgressDialog:n(9522).Z},emits:["close"],data:()=>({cancel:void 0,progress:void 0,splitOn:"p+h"}),inject:["$model"],mounted(){this.$refs.data.focus()},methods:{model(){return this.$model},start(){this.model().attempt((async()=>{const e=(0,s.parse)(this.$refs.data,this.model(),{splitOn:this.splitOn});try{const t=i.TaskMonitor.run((t=>(0,s.importURLs)(this.model(),e,t)));this.cancel=()=>t.cancel(),this.progress=t.progress,await t}finally{this.cancel=void 0,this.progress=void 0,this.$emit("close")}}))}}})},9567:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357);t.s=function(e,t,n,s,i,r){return(0,o.openBlock)(),(0,o.createElementBlock)("nav",{class:"action-group",onDragstart:t[0]||(t[0]=(0,o.withModifiers)((()=>{}),["stop","prevent"])),onDragenter:t[1]||(t[1]=(0,o.withModifiers)((()=>{}),["stop"])),onDragover:t[2]||(t[2]=(0,o.withModifiers)((()=>{}),["stop"])),onMousedown:t[3]||(t[3]=(0,o.withModifiers)((()=>{}),["stop"])),onPointerdown:t[4]||(t[4]=(0,o.withModifiers)((()=>{}),["stop"])),onTouchstart:t[5]||(t[5]=(0,o.withModifiers)((()=>{}),["stop"])),onClick:t[6]||(t[6]=(0,o.withModifiers)((()=>{}),["stop"])),onDblclick:t[7]||(t[7]=(0,o.withModifiers)((()=>{}),["stop"])),onAltclick:t[8]||(t[8]=(0,o.withModifiers)((()=>{}),["stop"]))},[(0,o.renderSlot)(e.$slots,"default")],32)}},4914:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["title"];t.s=function(e,t,n,i,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("a",{class:"action",title:n.tooltip,onClick:t[0]||(t[0]=(0,o.withModifiers)(((...e)=>a.act&&a.act(...e)),["prevent","stop"]))},[(0,o.createCommentVNode)(" XXX do something with {{name}} for blind users ")],8,s)}},6155:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s={key:0,class:"dialog-title"},i={class:"dialog-content"},r={key:1,class:"dialog-buttons"};t.s=function(e,t,n,a,l,d){const c=(0,o.resolveComponent)("ModalBackdrop");return(0,o.openBlock)(),(0,o.createBlock)(c,{class:(0,o.normalizeClass)(e.backdropClass),onClick:e.close,onKeydown:(0,o.withKeys)((0,o.withModifiers)(e.close,["prevent","stop"]),["esc"])},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("aside",(0,o.mergeProps)({ref:"dialog",class:"dialog"},e.$attrs,{onClick:t[1]||(t[1]=(0,o.withModifiers)((()=>{}),["stop"]))}),[e.$slots.title||!e.preventClosing?((0,o.openBlock)(),(0,o.createElementBlock)("header",s,[(0,o.renderSlot)(e.$slots,"title"),e.preventClosing?(0,o.createCommentVNode)("v-if",!0):(0,o.renderSlot)(e.$slots,"close",{key:0},(()=>[(0,o.createElementVNode)("button",{class:"dialog-close",title:"Close",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.close&&e.close(...t)),["prevent","stop"]))})]))])):(0,o.createCommentVNode)("v-if",!0),(0,o.createElementVNode)("section",i,[(0,o.renderSlot)(e.$slots,"default")]),e.$slots.buttons?((0,o.openBlock)(),(0,o.createElementBlock)("footer",r,[(0,o.renderSlot)(e.$slots,"buttons")])):(0,o.createCommentVNode)("v-if",!0)],16)])),_:3},8,["class","onClick","onKeydown"])}},6691:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357);t.s=function(e,t,n,s,i,r){return(0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.is||"ul"),{ref:"top",onDragenter:e.parentDragEnter,onDragover:e.itemDragOver,onDrop:e.doDrop},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.displayItems,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:t[e.itemKey]},[n===e.ghostIndex?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.itemIs||"li"),{key:0,style:(0,o.normalizeStyle)(e.ghostStyle),"data-dnd-ghost":"true",onDragenter:e.ghostDragEnter,onDragover:e.ghostDragOver,onDrop:e.doDrop},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"ghost")])),_:3},8,["style","onDragenter","onDragover","onDrop"])):(0,o.createCommentVNode)("v-if",!0),((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.itemIs||"li"),{style:(0,o.normalizeStyle)(e.draggingIndex===n?"display: none":""),class:(0,o.normalizeClass)(e.itemClass&&e.itemClass(t,n)),ref:t=>{e.listEls[n]=t},onMousedown:t=>e.enableDrag(n),onMouseup:t=>e.disableDrag(n),onDragstart:t=>e.itemDragStart(t,n),onDragend:e.itemDragEnd,onDragenter:t=>e.itemDragEnter(t,n),onDragover:e.itemDragOver,onDrop:e.doDrop},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"item",{item:t})])),_:2},1032,["style","class","onMousedown","onMouseup","onDragstart","onDragend","onDragenter","onDragover","onDrop"]))],64)))),128)),e.ghostIndex===e.displayItems.length?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.itemIs||"li"),{key:0,style:(0,o.normalizeStyle)(e.ghostStyle),"data-dnd-ghost":"true",onDragenter:e.ghostDragEnter,onDragover:e.ghostDragOver,onDrop:e.doDrop},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"ghost")])),_:3},8,["style","onDragenter","onDragover","onDrop"])):(0,o.createCommentVNode)("v-if",!0)])),_:3},8,["onDragenter","onDragover","onDrop"])}},7434:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["value","placeholder","disabled","onMousedown"],i=["title"];t.s=function(e,t,n,r,a,l){return"displaying"!=e.state?((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,ref:"input",type:"text",value:e.editableValue,placeholder:e.defaultValue,disabled:"editing"!=e.state,onMousedown:(0,o.withModifiers)((e=>{}),["stop"]),onBlur:t[0]||(t[0]=(...t)=>e.commit&&e.commit(...t)),onKeyup:[t[1]||(t[1]=(0,o.withKeys)((0,o.withModifiers)(((...t)=>e.commit&&e.commit(...t)),["prevent"]),["enter"])),t[2]||(t[2]=(0,o.withKeys)((0,o.withModifiers)(((...t)=>e.cancel&&e.cancel(...t)),["prevent"]),["esc"]))]},null,40,s)):((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,title:e.displayValue,onClick:t[3]||(t[3]=(0,o.withModifiers)(((...t)=>e.begin&&e.begin(...t)),["prevent","stop"]))},(0,o.toDisplayString)(e.displayValue),9,i))}},2581:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["src","srcset"];t.s=function(e,t,n,i,r,a){return e.src?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,src:e.src,srcset:e.src+" 2x",referrerpolicy:"no-referrer",alt:""},null,8,s)):((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,class:(0,o.normalizeClass)(e.defaultClass)},null,2))}},5278:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["open"];t.s=function(e,t,n,i,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("details",{ref:"details",open:e.isOpen,class:(0,o.normalizeClass)({[e.$style.details]:!0,[e.horizontal]:!0,[e.vertical]:!0}),onToggle:t[4]||(t[4]=(...t)=>e.onToggle&&e.onToggle(...t)),onClick:t[5]||(t[5]=(0,o.withModifiers)(((...t)=>e.open&&e.open(...t)),["prevent","stop"]))},[(0,o.createElementVNode)("summary",{ref:"summary",class:(0,o.normalizeClass)({[e.$style.summary]:!0,[e.summaryClass]:!0}),tabindex:"0"},[(0,o.renderSlot)(e.$slots,"summary",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.name),1)]))],2),e.isOpen||e.persist?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.inPlace?"div":"teleport"),{key:0,to:"body"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",{style:(0,o.normalizeStyle)(e.isOpen?"":"display: none"),class:(0,o.normalizeClass)({[e.$style.modal]:!0,"menu-modal":!0,[e.modalClass]:!0}),tabindex:"-1",onKeydown:t[2]||(t[2]=(0,o.withKeys)((0,o.withModifiers)(((...t)=>e.close&&e.close(...t)),["prevent","stop"]),["esc"])),onClick:t[3]||(t[3]=(0,o.withModifiers)(((...t)=>e.close&&e.close(...t)),["prevent","stop"]))},[(0,o.createElementVNode)("div",{ref:"bounds",style:(0,o.normalizeStyle)(e.bounds),class:(0,o.normalizeClass)({"menu-bounds":!0,[e.$style.bounds]:!0,[e.vertical]:!0,[e.horizontal]:!0})},[(0,o.createElementVNode)("nav",{ref:"menu",class:(0,o.normalizeClass)(e.$style.menu),tabIndex:"0",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.close&&e.close(...t)),["stop"])),onFocusout:t[1]||(t[1]=(...t)=>e.onFocusOut&&e.onFocusOut(...t))},[(0,o.renderSlot)(e.$slots,"default")],34)],6)],38)])),_:3})):(0,o.createCommentVNode)("v-if",!0)],42,s)}},318:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357);t.s=function(e,t,n,s,i,r){return(0,o.openBlock)(),(0,o.createElementBlock)("aside",(0,o.mergeProps)({class:{"modal-backdrop":!0,[e.$style.modal]:!0},tabindex:"-1"},e.$attrs,{ref:"modal"}),[(0,o.renderSlot)(e.$slots,"default")],16)}},1701:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357);t.s=function(e,t,n,s,i,r){const a=(0,o.resolveComponent)("Button"),l=(0,o.resolveComponent)("ButtonBox");return e.dismissed?(0,o.createCommentVNode)("v-if",!0):((0,o.openBlock)(),(0,o.createElementBlock)("aside",{key:0,class:(0,o.normalizeClass)({notification:!0,"has-action":!e.inactive})},[(0,o.createElementVNode)("div",{class:"contents",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.activate&&e.activate(...t)),["prevent","stop"]))},[(0,o.renderSlot)(e.$slots,"default")]),(0,o.createVNode)(l,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(a,{class:"cancel",name:"Dismiss",tooltip:"Dismiss notification",onAction:e.dismiss},null,8,["onAction"])])),_:1})],2))}},1421:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["disabled"];t.s=function(e,t,n,i,r,a){const l=(0,o.resolveComponent)("ProgressItem"),d=(0,o.resolveComponent)("Dialog");return(0,o.openBlock)(),(0,o.createBlock)(d,{class:(0,o.normalizeClass)({progress:!0,cancellable:e.cancel}),"backdrop-class":{progress:!0,cancellable:e.cancel},"prevent-closing":"true"},(0,o.createSlots)({default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{class:"toplevel",progress:e.progress},null,8,["progress"])])),_:2},[e.cancel?{name:"buttons",fn:(0,o.withCtx)((()=>[(0,o.createElementVNode)("button",{disabled:e.cancelled,class:(0,o.normalizeClass)({disabled:e.cancelled}),onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.doCancel&&e.doCancel(...t)),["prevent","stop"]))}," Cancel ",10,s)]))}:void 0]),1032,["class","backdrop-class"])}},9278:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s={class:"progress-item"},i=["max","value"],r={key:0};t.s=function(e,t,n,a,l,d){const c=(0,o.resolveComponent)("Self");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("progress",{max:0!==e.progress.max?e.progress.max:void 0,value:0!==e.progress.max?e.progress.value:void 0},null,8,i),(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.progress.status),1),e.progress.children.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("ul",r,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.progress.children,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:e.id},[(0,o.createVNode)(c,{progress:e},null,8,["progress"])])))),128))])):(0,o.createCommentVNode)("v-if",!0)])}},2474:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["title","data-id"],i=["href"];t.s=function(e,t,n,r,a,l){var d,c;const u=(0,o.resolveComponent)("item-icon"),h=(0,o.resolveComponent)("Button"),m=(0,o.resolveComponent)("ButtonBox");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)({"action-container":!0,tab:!0,saved:!0,open:e.hasOpenTab,active:e.hasActiveTab,selected:e.bookmark.$selected}),title:e.bookmark.title,"data-id":e.bookmark.id,onClick:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.select&&e.select(...t)),["prevent","stop"]))},[(0,o.createVNode)(u,{class:"action select",src:e.bookmark.$selected?"":null===(c=null===(d=e.favicon)||void 0===d?void 0:d.value)||void 0===c?void 0:c.favIconUrl,"default-class":{"icon-tab":!e.bookmark.$selected,"icon-tab-selected-inverse":e.bookmark.$selected},onClick:(0,o.withModifiers)(e.select,["prevent","stop"])},null,8,["src","default-class","onClick"]),(0,o.createElementVNode)("a",{class:"text",href:e.bookmark.url,target:"_blank",draggable:"false",ref:"a",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.open&&e.open(...t)),["prevent","stop"]))},(0,o.toDisplayString)(e.bookmark.title),9,i),(0,o.createVNode)(m,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{class:"restore-remove",onAction:e.openRemove,tooltip:`Open this tab and delete it from the group (hold ${e.bgKey} to open in background)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(h,{class:"remove",onAction:e.remove,tooltip:"Delete this tab from the group"},null,8,["onAction"])])),_:1})],10,s)}},9799:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357);t.s=function(e,t,n,s,i,r){const a=(0,o.resolveComponent)("Folder"),l=(0,o.resolveComponent)("dnd-list");return(0,o.openBlock)(),(0,o.createBlock)(l,{class:"folder-list",modelValue:e.children,"onUpdate:modelValue":t[0]||(t[0]=t=>e.children=t),"item-key":"id","item-class":e=>({hidden:!("children"in e)||!e.$visible}),accepts:e.accepts,drag:e.drag,drop:e.drop,"mimic-height":!0},{item:(0,o.withCtx)((({item:t})=>["children"in t?((0,o.openBlock)(),(0,o.createBlock)(a,{key:0,ref:"folders",folder:t,metadata:e.model().bookmark_metadata.get(t.id)},null,8,["folder","metadata"])):(0,o.createCommentVNode)("v-if",!0)])),_:1},8,["modelValue","item-class","accepts","drag","drop"])}},5553:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["data-id"],i={class:"contents"},r=(0,o.createElementVNode)("span",{class:"indent"},null,-1),a={class:"text status-text hidden-count"};t.s=function(e,t,n,l,d,c){const u=(0,o.resolveComponent)("Button"),h=(0,o.resolveComponent)("ButtonBox"),m=(0,o.resolveComponent)("editable-label"),f=(0,o.resolveComponent)("bookmark"),p=(0,o.resolveComponent)("dnd-list");return(0,o.openBlock)(),(0,o.createElementBlock)("section",{class:(0,o.normalizeClass)({folder:!0,"action-container":!0,collapsed:e.collapsed}),"data-id":e.folder.id},[(0,o.createElementVNode)("header",null,[(0,o.createVNode)(u,{class:(0,o.normalizeClass)({collapse:!e.collapsed,expand:e.collapsed}),tooltip:"Hide the tabs for this group",onAction:t[0]||(t[0]=t=>e.collapsed=!e.collapsed)},null,8,["class"]),0===e.selectedCount?((0,o.openBlock)(),(0,o.createBlock)(h,{key:0,class:"folder-actions"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{class:"stash here",onAction:e.stash,tooltip:`Stash all (or highlighted) open tabs to this group (hold ${e.altKey} to keep tabs open)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(u,{class:"stash one here",onAction:e.stashOne,tooltip:`Stash the active tab to this group (hold ${e.altKey} to keep tabs open)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(u,{class:"restore",onAction:e.restoreAll,tooltip:`Open all tabs in this group (hold ${e.bgKey} to open in background)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(u,{class:"restore-remove",onAction:e.restoreAndRemove,tooltip:`Open all tabs in the group and delete the group (hold ${e.bgKey} to open in background)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(u,{class:"remove",onAction:e.remove,tooltip:"Delete this group"},null,8,["onAction"])])),_:1})):((0,o.openBlock)(),(0,o.createBlock)(h,{key:1,class:"folder-actions"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{class:"stash here",onAction:e.move,tooltip:`Move ${e.selectedCount} selected tab(s) to this group (hold ${e.altKey} to copy)`},null,8,["onAction","tooltip"])])),_:1})),(0,o.createCommentVNode)(" This is at the end so it gets put in front of the buttons etc.\n         Important to ensure the focused box-shadow gets drawn over the buttons,\n         rather than behind them. "),(0,o.createVNode)(m,{class:(0,o.normalizeClass)({"folder-name":!0,ephemeral:!0}),value:e.nonDefaultTitle,defaultValue:e.defaultTitle,edit:e.rename},null,8,["value","defaultValue","edit"])]),(0,o.createElementVNode)("div",i,[(0,o.createVNode)(p,{class:"tabs",modelValue:e.children,"onUpdate:modelValue":t[1]||(t[1]=t=>e.children=t),"item-key":"id","item-class":e.childClasses,accepts:e.accepts,drag:e.drag,drop:e.drop,"mimic-height":!0},{item:(0,o.withCtx)((({item:t})=>[e.isValidChild(t)?((0,o.openBlock)(),(0,o.createBlock)(f,{key:0,bookmark:t,class:(0,o.normalizeClass)({"folder-item":!0,"no-match":!t.$visible})},null,8,["bookmark","class"])):(0,o.createCommentVNode)("v-if",!0)])),_:1},8,["modelValue","item-class","accepts","drag","drop"]),e.filterCount>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"folder-item",onClick:t[2]||(t[2]=(0,o.withModifiers)((t=>e.showFiltered=!e.showFiltered),["prevent","stop"]))},[r,(0,o.createElementVNode)("span",a,(0,o.toDisplayString)(e.showFiltered?"-":"+")+" "+(0,o.toDisplayString)(e.filterCount)+" filtered ",1)])):(0,o.createCommentVNode)("v-if",!0)])],10,s)}},1553:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s={key:0},i={key:1},r=(0,o.createElementVNode)("hr",null,null,-1),a=(0,o.createElementVNode)("hr",null,null,-1),l=["href"],d=(0,o.createElementVNode)("hr",null,null,-1),c=(0,o.createElementVNode)("a",{tabindex:"0",href:"https://josh-berry.github.io/tab-stash/tips.html"},"Tips and Tricks",-1),u=(0,o.createElementVNode)("a",{tabindex:"0",href:"https://github.com/josh-berry/tab-stash/wiki"},"Wiki",-1),h=(0,o.createElementVNode)("a",{tabindex:"0",href:"https://josh-berry.github.io/tab-stash/support.html"},"Help and Support",-1),m=["href"],f=["placeholder"],p={class:"folder-list"},v={class:"page status-text"},g=["href"];t.s=function(e,t,n,b,w,y){const _=(0,o.resolveComponent)("OopsNotification"),k=(0,o.resolveComponent)("Notification"),A=(0,o.resolveComponent)("Menu"),C=(0,o.resolveComponent)("SelectionMenu"),x=(0,o.resolveComponent)("Button"),S=(0,o.resolveComponent)("window"),I=(0,o.resolveComponent)("folder-list");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("main",{class:(0,o.normalizeClass)({"selection-active":e.selection_active}),tabindex:"0",onClick:t[9]||(t[9]=(...t)=>e.deselectAll&&e.deselectAll(...t)),onKeydown:t[10]||(t[10]=(0,o.withKeys)((0,o.withModifiers)(((...t)=>e.onEscape&&e.onEscape(...t)),["prevent","stop"]),["esc"]))},[(0,o.createVNode)(o.TransitionGroup,{tag:"aside",class:"notification-overlay",appear:"",name:"notification"},{default:(0,o.withCtx)((()=>[e.showCrashReport?((0,o.openBlock)(),(0,o.createBlock)(_,{key:"oops"})):(0,o.createCommentVNode)("v-if",!0),"features"===e.recently_updated?((0,o.openBlock)(),(0,o.createBlock)(k,{key:"new-features",onActivate:t[0]||(t[0]=t=>e.go("whats-new.html")),onDismiss:e.hideWhatsNew},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" Tab Stash "+(0,o.toDisplayString)(e.my_version)+" now allows you to select and move multiple tabs at once. See what else is new! ",1)])),_:1},8,["onDismiss"])):(0,o.createCommentVNode)("v-if",!0),"fixes"===e.recently_updated?((0,o.openBlock)(),(0,o.createBlock)(k,{key:"new-fixes",onActivate:t[1]||(t[1]=t=>e.go("whats-new.html")),onDismiss:e.hideWhatsNew},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" Tab Stash "+(0,o.toDisplayString)(e.my_version)+" includes bug fixes and performance improvements. See what's new! ",1)])),_:1},8,["onDismiss"])):(0,o.createCommentVNode)("v-if",!0),e.stash_root_warning?((0,o.openBlock)(),(0,o.createBlock)(k,{key:"stash-root-warning",onActivate:e.stash_root_warning.help},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.stash_root_warning.text),1)])),_:1},8,["onActivate"])):(0,o.createCommentVNode)("v-if",!0),0!==e.recently_deleted?((0,o.openBlock)(),(0,o.createBlock)(k,{key:"recently-deleted",onActivate:t[2]||(t[2]=t=>"object"==typeof e.recently_deleted?e.model().undelete(e.recently_deleted):e.go("deleted-items.html"))},{default:(0,o.withCtx)((()=>["object"==typeof e.recently_deleted?((0,o.openBlock)(),(0,o.createElementBlock)("span",s,' Deleted "'+(0,o.toDisplayString)(e.recently_deleted.item.title)+'". Undo? ',1)):((0,o.openBlock)(),(0,o.createElementBlock)("span",i," Deleted "+(0,o.toDisplayString)(e.recently_deleted)+" items. Show what was deleted? ",1))])),_:1})):(0,o.createCommentVNode)("v-if",!0)])),_:1}),(0,o.createElementVNode)("header",{class:"page action-container",onClick:t[8]||(t[8]=(0,o.withModifiers)((e=>{}),["stop"]))},[(0,o.createVNode)(A,{class:"menu main-menu",summaryClass:"action mainmenu"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("button",{onClick:t[3]||(t[3]=(0,o.withModifiers)(((...t)=>e.showOptions&&e.showOptions(...t)),["prevent"]))},"Options..."),r,(0,o.createElementVNode)("button",{onClick:t[4]||(t[4]=(0,o.withModifiers)((t=>e.dialog={class:"ImportDialog"}),["prevent"]))},"Import..."),(0,o.createElementVNode)("button",{onClick:t[5]||(t[5]=(0,o.withModifiers)(((...t)=>e.showExportDialog&&e.showExportDialog(...t)),["prevent"]))},"Export..."),a,(0,o.createElementVNode)("a",{tabindex:"0",href:e.pageref("deleted-items.html")},"Deleted Items...",8,l),(0,o.createElementVNode)("button",{onClick:t[6]||(t[6]=(0,o.withModifiers)(((...t)=>e.fetchMissingFavicons&&e.fetchMissingFavicons(...t)),["prevent"]))},"Fetch Missing Icons"),d,c,u,h,(0,o.createElementVNode)("a",{tabindex:"0",href:e.pageref("whats-new.html")},"What's New?",8,m)])),_:1}),e.selection_active?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0})):(0,o.createCommentVNode)("v-if",!0),(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"search",ref:"search",class:"ephemeral","aria-label":"Search",placeholder:e.search_placeholder,"onUpdate:modelValue":t[7]||(t[7]=t=>e.searchText=t)},null,8,f),[[o.vModelText,e.searchText]]),(0,o.createVNode)(x,{class:(0,o.normalizeClass)({collapse:!e.collapsed,expand:e.collapsed}),title:"Hide all tabs so only group names are showing",onAction:e.collapseAll},null,8,["class","onAction"])]),(0,o.createElementVNode)("div",p,[(0,o.createVNode)(S,{tabs:e.tabs,metadata:e.curWindowMetadata},null,8,["tabs","metadata"])]),e.stash_root?((0,o.openBlock)(),(0,o.createBlock)(I,{key:0,ref:"stashed",parentFolder:e.stash_root},null,8,["parentFolder"])):(0,o.createCommentVNode)("v-if",!0),(0,o.createElementVNode)("footer",v,[(0,o.createTextVNode)(" Tab Stash "+(0,o.toDisplayString)(e.my_version)+" â€” ",1),(0,o.createElementVNode)("a",{href:e.pageref("whats-new.html")},"What's New",8,g)])],34),(0,o.createVNode)(o.Transition,{appear:"",name:"dialog"},{default:(0,o.withCtx)((()=>[e.dialog?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.dialog.class),(0,o.mergeProps)({key:0},e.dialog.props,{onClose:t[11]||(t[11]=t=>e.dialog=void 0)}),null,16)):(0,o.createCommentVNode)("v-if",!0)])),_:1})],64)}},4825:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s={class:"count"},i=(0,o.createElementVNode)("div",{class:"icon icon-move-menu-inverse"},null,-1),r=[(0,o.createElementVNode)("span",{class:"icon icon-restore"},null,-1),(0,o.createElementVNode)("span",null,"Open",-1)],a=[(0,o.createElementVNode)("span",{class:"icon icon-restore-del"},null,-1),(0,o.createElementVNode)("span",null,"Unstash",-1)],l=(0,o.createElementVNode)("hr",null,null,-1),d=["title"],c=(0,o.createElementVNode)("span",{class:"icon icon-new-empty-group"},null,-1),u=(0,o.createElementVNode)("hr",null,null,-1),h=["title","onClick"],m=(0,o.createElementVNode)("hr",null,null,-1),f=[(0,o.createElementVNode)("span",{class:"icon icon-delete"},null,-1),(0,o.createElementVNode)("span",null,"Delete or Close",-1)];t.s=function(e,t,n,p,v,g){const b=(0,o.resolveComponent)("Menu");return(0,o.openBlock)(),(0,o.createBlock)(b,{ref:"menu",class:"menu selection-menu",modalClass:"action-container",onOpen:e.onOpenMenu},{summary:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",s,(0,o.toDisplayString)(e.selectedCount),1),i])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("button",{tabindex:"0",title:"Open stashed tabs",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.copyToWindow&&e.copyToWindow(...t)),["prevent"]))},r),(0,o.createElementVNode)("button",{tabindex:"0",title:"Open tabs and delete them from the stash",onClick:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.moveToWindow&&e.moveToWindow(...t)),["prevent"]))},a),l,(0,o.withDirectives)((0,o.createElementVNode)("input",{ref:"search",type:"search",placeholder:"Search or create group","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchText=t),onClick:t[3]||(t[3]=(0,o.withModifiers)((()=>{}),["stop"])),onKeypress:t[4]||(t[4]=(0,o.withKeys)((0,o.withModifiers)((t=>{e.moveToSearch(t),e.closeMenu()}),["prevent","stop"]),["enter"]))},null,544),[[o.vModelText,e.searchText]]),(0,o.createElementVNode)("button",{class:(0,o.normalizeClass)({selected:""===e.searchText||0===e.stashFolders.length}),title:e.createTooltip,onClick:t[5]||(t[5]=(0,o.withModifiers)(((...t)=>e.create&&e.create(...t)),["prevent"]))},[c,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.createTitle),1)],10,d),u,(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(e.$style.list),tabindex:"-1"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.stashFolders,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:(0,o.normalizeClass)({selected:0===n&&""!==e.searchText}),title:`Move to "${e.friendlyFolderName(t.title)}" (hold ${e.altKey} to copy)`,onClick:(0,o.withModifiers)((n=>e.moveTo(n,t.id)),["prevent"])},(0,o.toDisplayString)(e.friendlyFolderName(t.title)),11,h)))),256))],2),m,(0,o.createElementVNode)("button",{title:"Delete stashed tabs and close unstashed tabs",onClick:t[6]||(t[6]=(0,o.withModifiers)(((...t)=>e.remove&&e.remove(...t)),["prevent"]))},f)])),_:1},8,["onOpen"])}},925:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=["title","data-id"],i=["href"];t.s=function(e,t,n,r,a,l){const d=(0,o.resolveComponent)("item-icon"),c=(0,o.resolveComponent)("Button"),u=(0,o.resolveComponent)("ButtonBox");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)({"action-container":!0,tab:!0,open:!e.tab.hidden,active:!!e.tab.active,selected:e.tab.$selected}),title:e.tab.title,"data-id":e.tab.id,onClick:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.select&&e.select(...t)),["prevent","stop"]))},[(0,o.createVNode)(d,{class:"action select",src:e.tab.$selected?"":e.tab.favIconUrl,"default-class":{"icon-tab":!e.tab.$selected,"icon-tab-selected-inverse":e.tab.$selected},onClick:(0,o.withModifiers)(e.select,["prevent","stop"])},null,8,["src","default-class","onClick"]),(0,o.createElementVNode)("a",{class:"text",href:e.tab.url,target:"_blank",draggable:"false",ref:"a",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.open&&e.open(...t)),["prevent","stop"]))},(0,o.toDisplayString)(e.tab.title),9,i),(0,o.createVNode)(u,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{class:"stash one",onAction:e.stash,tooltip:`Stash this tab (hold ${e.altKey} to keep tab open)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(c,{class:"remove",onAction:e.remove,tooltip:"Close this tab"},null,8,["onAction"])])),_:1})],10,s)}},7599:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s={class:"contents"},i=(0,o.createElementVNode)("span",{class:"indent"},null,-1),r={class:"text status-text hidden-count"};t.s=function(e,t,n,a,l,d){const c=(0,o.resolveComponent)("Button"),u=(0,o.resolveComponent)("ButtonBox"),h=(0,o.resolveComponent)("editable-label"),m=(0,o.resolveComponent)("tab"),f=(0,o.resolveComponent)("dnd-list");return(0,o.openBlock)(),(0,o.createElementBlock)("section",{class:(0,o.normalizeClass)({folder:!0,window:!0,"action-container":!0,collapsed:e.collapsed})},[(0,o.createElementVNode)("header",null,[(0,o.createVNode)(c,{class:(0,o.normalizeClass)({collapse:!e.collapsed,expand:e.collapsed}),tooltip:"Hide the tabs for this group",onAction:t[0]||(t[0]=t=>e.collapsed=!e.collapsed)},null,8,["class"]),0===e.selectedCount?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,class:"folder-actions"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{class:"stash",onAction:e.stash,tooltip:`Stash only the unstashed tabs to a new group (hold ${e.altKey} to keep tabs open)`},null,8,["onAction","tooltip"]),(0,o.createVNode)(c,{class:"stash newgroup",onAction:e.newGroup,tooltip:"Create a new empty group"},null,8,["onAction"]),(0,o.createVNode)(c,{class:"remove",onAction:e.remove,tooltip:"Close all unstashed tabs"},null,8,["onAction"]),(0,o.createVNode)(c,{class:"remove stashed",onAction:e.removeStashed,tooltip:"Close all stashed tabs"},null,8,["onAction"]),(0,o.createVNode)(c,{class:"remove opened",onAction:e.removeOpen,tooltip:`Click: Close all open tabs\n${e.altKey}+Click: Close any hidden/stashed tabs (reclaims memory)`},null,8,["onAction","tooltip"])])),_:1})):((0,o.openBlock)(),(0,o.createBlock)(u,{key:1,class:"folder-actions"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{class:"stash newgroup",onAction:e.moveToNewGroup,tooltip:`Move ${e.selectedCount} tab(s) to a new group (hold ${e.altKey} to copy)`},null,8,["onAction","tooltip"]),e.selectedCount>0?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,class:"restore",onAction:e.copyToWindow,tooltip:`Open ${e.selectedCount} tab(s)`},null,8,["onAction","tooltip"])):(0,o.createCommentVNode)("v-if",!0),e.selectedCount>0?((0,o.openBlock)(),(0,o.createBlock)(c,{key:1,class:"restore-remove",onAction:e.moveToWindow,tooltip:`Unstash ${e.selectedCount} tab(s)`},null,8,["onAction","tooltip"])):(0,o.createCommentVNode)("v-if",!0)])),_:1})),(0,o.createCommentVNode)(" This is at the end so it gets put in front of the buttons etc.\n         Important to ensure the focused box-shadow gets drawn over the buttons,\n         rather than behind them. "),(0,o.createVNode)(h,{class:(0,o.normalizeClass)({"folder-name":!0,disabled:!0}),value:e.title,defaultValue:e.title},null,8,["value","defaultValue"])]),(0,o.createElementVNode)("div",s,[(0,o.createVNode)(f,{class:"tabs",modelValue:e.tabs,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tabs=t),"item-key":"id","item-class":e.childClasses,accepts:e.accepts,drag:e.drag,drop:e.drop,"mimic-height":!0},{item:(0,o.withCtx)((({item:t})=>[e.isValidChild(t)?((0,o.openBlock)(),(0,o.createBlock)(m,{key:0,tab:t,class:(0,o.normalizeClass)({"folder-item":!0,"no-match":!t.$visible})},null,8,["tab","class"])):(0,o.createCommentVNode)("v-if",!0)])),_:1},8,["modelValue","item-class","accepts","drag","drop"]),e.filteredCount>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"folder-item",onClick:t[2]||(t[2]=(0,o.withModifiers)((t=>e.showFiltered=!e.showFiltered),["prevent","stop"]))},[i,(0,o.createElementVNode)("span",r,(0,o.toDisplayString)(e.showFiltered?"-":"+")+" "+(0,o.toDisplayString)(e.filteredCount)+" filtered ",1)])):(0,o.createCommentVNode)("v-if",!0)])],2)}},9772:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=(0,o.createElementVNode)("span",{class:"group-title"},"Export",-1),i=["id"],r=["for"],a=["id"],l=[(0,o.createElementVNode)("option",{value:"html-noicons"},"Clickable Links",-1),(0,o.createElementVNode)("option",{value:"html-icons"},"Clickable Links with Icons",-1),(0,o.createElementVNode)("option",{value:"urls-folders"},"List of URLs",-1),(0,o.createElementVNode)("option",{value:"urls-nofolders"},"List of URLs (no stash names)",-1),(0,o.createElementVNode)("option",{value:"markdown"},"Markdown",-1),(0,o.createElementVNode)("option",{value:"onetab"},"OneTab",-1)],d=[(0,o.createElementVNode)("a",{href:"https://github.com/josh-berry/tab-stash/wiki/Exporting-Tabs-from-Tab-Stash",target:"_blank"},"About Formats...",-1)],c=["for"],u=["href"],h=["src","srcset"],m=["for"],f=["href"],p=(0,o.createTextVNode)(")"),v=(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("br")],-1),g=["for"],b=["href"],w=(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("br")],-1),y=["for"],_={key:0},k=["href"],A=(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("br")],-1);t.s=function(e,t,n,C,x,S){const I=(0,o.resolveComponent)("Dialog");return(0,o.openBlock)(),(0,o.createBlock)(I,{class:(0,o.normalizeClass)({[e.$style.dlg]:!0,"export-dialog":!0}),onClose:t[4]||(t[4]=t=>e.$emit("close"))},{title:(0,o.withCtx)((()=>[s])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("form",{id:e.$style.dlg,onSubmit:t[3]||(t[3]=(0,o.withModifiers)((()=>{}),["prevent","stop"]))},[(0,o.createElementVNode)("label",{for:e.$style.format,class:(0,o.normalizeClass)(e.$style.format)},"Format:",10,r),(0,o.withDirectives)((0,o.createElementVNode)("select",{id:e.$style.format,"onUpdate:modelValue":t[0]||(t[0]=t=>e.format=t)},l,8,a),[[o.vModelSelect,e.format]]),(0,o.createElementVNode)("nav",null,[(0,o.createElementVNode)("button",{onClick:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.select_all&&e.select_all(...t)),["prevent","stop"]))},"Select All"),(0,o.createElementVNode)("button",{class:"clickme",onClick:t[2]||(t[2]=(0,o.withModifiers)(((...t)=>e.copy&&e.copy(...t)),["prevent","stop"]))},"Copy")]),(0,o.createElementVNode)("label",{class:(0,o.normalizeClass)(e.$style.help)},d,2)],40,i),e.format.startsWith("html-")?((0,o.openBlock)(),(0,o.createElementBlock)("output",{key:0,ref:"output",tabindex:"0",for:e.$style.dlg},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.folders,(t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.id},[(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(e.friendlyFolderName(t.title)),1),(0,o.createElementVNode)("ul",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.leaves(t),(t=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:t.id},[(0,o.createElementVNode)("a",{href:t.url},[e.format.endsWith("-icons")?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,src:e.faviconFor(t),srcset:e.faviconFor(t)&&`${e.faviconFor(t)} 2x`,referrerpolicy:"no-referrer",alt:"",class:"icon"},null,8,h)):(0,o.createCommentVNode)("v-if",!0),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.format.endsWith("-icons")?" ":"")+" "+(0,o.toDisplayString)(t.title),1)],8,u)])))),128))])])))),128))],8,c)):(0,o.createCommentVNode)("v-if",!0),"markdown"==e.format?((0,o.openBlock)(),(0,o.createElementBlock)("output",{key:1,ref:"output",for:e.$style.dlg,class:(0,o.normalizeClass)(e.$style.plaintext),tabindex:"0"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.folders,(t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.id},[(0,o.createElementVNode)("div",null,"## "+(0,o.toDisplayString)(e.friendlyFolderName(t.title)),1),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.leaves(t),(t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.id},[(0,o.createTextVNode)("- ["+(0,o.toDisplayString)(e.quote_link_md(t.title))+"](",1),(0,o.createElementVNode)("a",{href:t.url},(0,o.toDisplayString)(e.quote_url_md(t.url)),9,f),p])))),128)),v])))),128))],10,m)):(0,o.createCommentVNode)("v-if",!0),"onetab"==e.format?((0,o.openBlock)(),(0,o.createElementBlock)("output",{key:2,ref:"output",for:e.$style.dlg,class:(0,o.normalizeClass)(e.$style.plaintext),tabindex:"0"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.folders,(t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.id},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.leaves(t),(e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.id},[(0,o.createElementVNode)("a",{href:e.url},(0,o.toDisplayString)(e.url),9,b),(0,o.createTextVNode)(" | "+(0,o.toDisplayString)(e.title),1)])))),128)),w])))),128))],10,g)):(0,o.createCommentVNode)("v-if",!0),e.format.startsWith("urls-")?((0,o.openBlock)(),(0,o.createElementBlock)("output",{key:3,ref:"output",for:e.$style.dlg,class:(0,o.normalizeClass)(e.$style.plaintext),tabindex:"0"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.folders,(t=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.id},[e.format.endsWith("-folders")?((0,o.openBlock)(),(0,o.createElementBlock)("div",_,"## "+(0,o.toDisplayString)(e.friendlyFolderName(t.title)),1)):(0,o.createCommentVNode)("v-if",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.leaves(t),(e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.id},[(0,o.createElementVNode)("a",{href:e.url},(0,o.toDisplayString)(e.url),9,k)])))),128)),A])))),128))],10,y)):(0,o.createCommentVNode)("v-if",!0)])),_:1},8,["class"])}},4145:(e,t,n)=>{"use strict";t.s=void 0;const o=n(357),s=(0,o.createElementVNode)("span",{class:"group-title"},"Import",-1),i=(0,o.createElementVNode)("label",{for:"data"}," Paste anything containing links or URLs here. Links and URLs will be extracted and converted into bookmarks in your stash. ",-1),r=(0,o.createElementVNode)("label",{for:"splitOn"},"Split tabs into different groups on:",-1),a=[(0,o.createElementVNode)("option",{value:"p+h"},"Paragraphs and Headers",-1),(0,o.createElementVNode)("option",{value:"h"},"Headers",-1),(0,o.createElementVNode)("option",{value:""},"Nothing [all in one group]",-1)];t.s=function(e,t,n,l,d,c){const u=(0,o.resolveComponent)("ProgressDialog"),h=(0,o.resolveComponent)("Dialog");return e.progress?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,progress:e.progress,cancel:e.cancel},null,8,["progress","cancel"])):((0,o.openBlock)(),(0,o.createBlock)(h,{key:1,class:(0,o.normalizeClass)({[e.$style.dlg]:!0,"import-dialog":!0}),onClose:t[2]||(t[2]=t=>e.$emit("close"))},{title:(0,o.withCtx)((()=>[s])),buttons:(0,o.withCtx)((()=>[(0,o.createElementVNode)("button",{class:"clickme",onClick:t[1]||(t[1]=(...t)=>e.start&&e.start(...t))},"Import")])),default:(0,o.withCtx)((()=>[i,(0,o.createElementVNode)("div",{ref:"data",contenteditable:"true",id:"data",class:(0,o.normalizeClass)({input:!0,[e.$style.input]:!0})},null,2),(0,o.createElementVNode)("form",{class:(0,o.normalizeClass)(e.$style.split_mode)},[r,(0,o.withDirectives)((0,o.createElementVNode)("select",{id:"splitOn","onUpdate:modelValue":t[0]||(t[0]=t=>e.splitOn=t)},a,512),[[o.vModelSelect,e.splitOn]])],2)])),_:1},8,["class"]))}},7006:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(5365),l=i(n(3182)),d=r(n(1977));t.default=class{constructor(e,t){this.name=e,this.connect=null!=t?t:l.connect,this.onSet=(0,d.default)("KVS.Client.onSet",this.name),this.onDelete=(0,d.default)("KVS.Client.onDelete",this.name),this.onSyncLost=(0,d.default)("KVS.Client.onSyncLost",this.name),this._port=void 0,this._reconnect()}async get(e){const t=await this._request_with_retry({$type:"get",keys:e});return"set"!==(null==t?void 0:t.$type)?[]:t.entries}async getStartingFrom(e,t){const n=await this._request_with_retry({$type:"getStartingFrom",bound:e,limit:t});return"set"!==(null==n?void 0:n.$type)?[]:n.entries}async getEndingAt(e,t){const n=await this._request_with_retry({$type:"getEndingAt",bound:e,limit:t});return"set"!==(null==n?void 0:n.$type)?[]:n.entries}list(){return(0,a.genericList)(((e,t)=>this.getStartingFrom(e,t)))}listReverse(){return(0,a.genericList)(((e,t)=>this.getEndingAt(e,t)))}async set(e){await this._request_with_retry({$type:"set",entries:e})}async delete(e){await this._request_with_retry({$type:"delete",keys:e})}async deleteAll(){await this._request_with_retry({$type:"deleteAll"})}_reconnect(){this._port=this.connect(this.name),this._port.onNotify=e=>{if(e)switch(e.$type){case"delete":this.onDelete.send(e.keys);break;case"set":this.onSet.send(e.entries)}},this._port.onDisconnect=()=>{this._reconnect(),this.onSyncLost.send()}}async _request_with_retry(e){let t=10;for(;;)try{return await this._port.request(e)}catch(e){if(!(e instanceof l.NanoPortError))throw e;if(t<=0)throw e;await new Promise((e=>setTimeout(e,100*(10-t)))),--t}}}},5365:function(e,t,n){"use strict";var o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,s){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,s,(t=e[n](t)).done,t.value)}))}}},i=this&&this.__asyncDelegator||function(e){var t,n;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,i){t[s]=e[s]?function(t){return(n=!n)?{value:o(e[s](t)),done:"return"===s}:i?i(t):t}:i}},r=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(e,t||[]),r=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(e){i[e]&&(s[e]=function(t){return new Promise((function(n,o){r.push([e,t,n,o])>1||l(e,t)}))})}function l(e,t){try{(n=i[e](t)).value instanceof o?Promise.resolve(n.value.v).then(d,c):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function d(e){l("next",e)}function c(e){l("throw",e)}function u(e,t){e(t),r.shift(),r.length&&l(r[0][0],r[0][1])}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.genericList=t.KVSCache=t.Service=t.Client=void 0;const l=n(357),d=n(6238),c=n(2348),u=a(n(7006));t.Client=u.default;const h=a(n(7761));t.Service=h.default,t.KVSCache=class{constructor(e){this._entries=new Map,this._needs_flush=new Map,this._needs_fetch=new Map,this._pending_io=null,this._crash_count=0,this.kvs=e,this.kvs.onSet.addListener((e=>{for(const t of e)this._update(t.key,t.value)})),this.kvs.onDelete.addListener((e=>{for(const t of e)this._update(t,null)})),this.kvs.onSyncLost.addListener((()=>{for(const[e,t]of this._entries)t.value=null,this._needs_fetch.set(e,t);this._io()}))}get(e){let t=this._entries.get(e);return t||(t=(0,l.reactive)({key:e,value:null}),this._entries.set(e,t),this._needs_fetch.set(e,t),this._io()),t}set(e,t){const n=this.get(e);return n.value=t,this._needs_flush.set(e,n),this._needs_fetch.delete(e),this._io(),n}maybeInsert(e,t){const n=this.get(e);return null!==n.value||(n.value=t,this._needs_fetch.set(e,n),this._needs_flush.set(e,n),this._io()),n}sync(){return this._pending_io?this._pending_io:Promise.resolve()}_update(e,t){const n=this._entries.get(e);n&&(n.value=t,this._needs_fetch.delete(e),this._needs_flush.delete(e))}_io(){this._pending_io||this._crash_count>=3||(this._pending_io=new Promise((e=>(0,d.later)((()=>(0,c.logErrorsFrom)((async()=>{for(;this._needs_fetch.size>0||this._needs_flush.size>0;)await this._fetch(),await this._flush()})).catch((e=>{throw++this._crash_count,this._crash_count>=3&&console.warn(`KVC[${this.kvs.name}]: Crashed too many times during I/O; stopping.`),e})).finally((()=>{this._pending_io=null,e()})))))))}async _fetch(){const e=this._needs_fetch;this._needs_fetch=new Map;for(const t of(0,d.batchesOf)(100,e.keys())){const e=await this.kvs.get(t);for(const t of e)this._update(t.key,t.value)}}async _flush(){const e=this._needs_flush;this._needs_flush=new Map;for(const t of(0,d.batchesOf)(100,e.values())){const e=JSON.parse(JSON.stringify(t));await this.kvs.set(e)}}},t.genericList=function(e){return r(this,arguments,(function*(){let t;for(;;){const n=yield o(e(t,100));if(0==n.length)break;yield o(yield*i(s(n))),t=n[n.length-1].key}}))}},7761:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(3029),i=n(5365),r=o(n(1977));class a{constructor(e,t){this._clients=new Set,this.name=t,this.onSet=(0,r.default)("KVS.Service.onSet",this.name),this.onDelete=(0,r.default)("KVS.Service.onDelete",this.name),this.onSyncLost=(0,r.default)("KVS.Service.onSyncLost",this.name),this._db=e}static async open(e,t){return await navigator.storage.persisted()||await navigator.storage.persist(),new a(await(0,s.openDB)(e,1,{upgrade(e,n,o,s){e.createObjectStore(t)}}),t)}async get(e){const t=this._db.transaction(this.name),n=[];for(const o of e){const e=await t.store.get(o);e&&n.push({key:o,value:e})}return n}async getStartingFrom(e,t){const n=e?IDBKeyRange.lowerBound(e,!0):void 0,o=this._db.transaction(this.name);let s=await o.store.openCursor(n);const i=[];for(;s&&t>0;)i.push({key:s.primaryKey,value:s.value}),--t,s=await s.continue();return await o.done,i}async getEndingAt(e,t){const n=e?IDBKeyRange.upperBound(e,!0):void 0,o=this._db.transaction(this.name);let s=await o.store.openCursor(n,"prev");const i=[];for(;s&&t>0;)i.push({key:s.primaryKey,value:s.value}),--t,s=await s.continue();return await o.done,i}list(){return(0,i.genericList)(((e,t)=>this.getStartingFrom(e,t)))}listReverse(){return(0,i.genericList)(((e,t)=>this.getEndingAt(e,t)))}async set(e){const t=this._db.transaction(this.name,"readwrite");for(const{key:n,value:o}of e)await t.store.put(o,n);await t.done,e.length>0&&(this._broadcast({$type:"set",entries:e}),this.onSet.send(e))}async delete(e){const t=[],n=this._db.transaction(this.name,"readwrite");for(const o of e)await n.store.get(o)&&t.push(o),await n.store.delete(o);await n.done,t.length>0&&(this._broadcast({$type:"delete",keys:t}),this.onDelete.send(t))}async deleteAll(){for(;;){const e=[],t=this._db.transaction(this.name,"readwrite");let n=await t.store.openCursor();for(;n&&(e.push(n.primaryKey),n.delete(),n=await n.continue(),!(e.length>100)););if(await t.done,!(e.length>0))break;this._broadcast({$type:"delete",keys:e}),this.onDelete.send(e)}}onConnect(e){this._clients.add(e)}onDisconnect(e){this._clients.delete(e)}async onRequest(e,t){switch(null==t?void 0:t.$type){case"get":return{$type:"set",entries:await this.get(t.keys)};case"getStartingFrom":return{$type:"set",entries:await this.getStartingFrom(t.bound,t.limit)};case"getEndingAt":return{$type:"set",entries:await this.getEndingAt(t.bound,t.limit)};case"set":return await this.set(t.entries),null;case"delete":return await this.delete(t.keys),null;case"deleteAll":return await this.deleteAll(),null;default:return null}}_broadcast(e){for(const t of this._clients)t.notify(e)}}t.default=a},6913:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._StoredObjectFactory=t.anEnum=t.maybeNull=t.maybeUndef=t.aString=t.aNumber=t.aBoolean=void 0;const s=o(n(3150)),i=n(357),r=o(n(1977));t.aBoolean=function(e,t){switch(typeof e){case"undefined":return t;case"boolean":return e;case"number":return 0!==e;case"string":switch(e.toLowerCase()){case"false":case"no":return!1;case"true":case"yes":return!0;default:return t}default:return null!==e&&t}},t.aNumber=function(e,t){switch(typeof e){case"boolean":case"number":case"string":const n=Number(e);return Number.isNaN(n)?t:n;default:return t}},t.aString=function(e,t){switch(typeof e){default:return t;case"boolean":case"number":return e.toString();case"string":return e}},t.maybeUndef=function(e){return(t,n)=>{switch(t){case void 0:case null:return;default:return e(t,n)}}},t.maybeNull=function(e){return(t,n)=>{switch(t){case void 0:case null:return null;default:return e(t,n)}}},t.anEnum=(...e)=>(t,n)=>e.includes(t)?t:n,t.default=function(e,t,n){return l.get(e,t,n)};class a{constructor(){this._live={sync:new Map,local:new Map},this._loading=new Set,s.default.storage.onChanged.addListener(((e,t)=>{if("sync"!==t&&"local"!==t)return;const n=this._live[t];for(const t in e){const o=n.get(t);o&&("newValue"in e[t]?o._changed(e[t].newValue):o._changed({}),this._loading.delete(o))}}))}async get(e,t,n){let o=this._live[e].get(t);if(o){if(o._def!==n)throw new TypeError(`Tried to load '${t}' with a conflicting def`);return o}o=new d(this,e,t,n),this._loading.add(o);const i=await s.default.storage[e].get(t);return this._loading.has(o)&&(o._load(i[t]),this._loading.delete(o)),o}add(e){if(this._live[e._store].has(e._key))throw new Error(`Created multiple StoredObjects for key ${e._key}`);this._live[e._store].set(e._key,e)}}t._StoredObjectFactory=a;const l=new a;class d{constructor(e,t,n,o){const s={};for(const e in o)s[e]=o[e].default;this.state=(0,i.reactive)(s),this.onChanged=(0,r.default)("StoredObject.onChanged",`${t}/${n}`),this._factory=e,this._store=t,this._key=n,this._def=o,this._factory.add(this)}async set(e){const t={};for(const n in this._def){if(!(n in e)){this.state[n]!==this._def[n].default&&(t[n]=this.state[n]);continue}const o=this._def[n].is(e[n],this._def[n].default);o!==this._def[n].default&&(t[n]=o)}return await s.default.storage[this._store].set({[this._key]:t})}async delete(){return this._changed({}),s.default.storage[this._store].remove(this._key)}_changed(e){this._load(e),this.onChanged.send(this)}_load(e){for(const e in this._def)this.state[e]=this._def[e].default;if("object"==typeof e)for(const t in e)t in this._def&&(this.state[t]=this._def[t].is(e[t],this._def[t].default))}}},3770:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pageref=void 0;const a=r(n(3150)),l=n(357),d=n(6238),c=i(n(4355));t.default=function(e,t){window.addEventListener("load",(0,d.asyncEvent)((async function(){var n,o,s,i;switch(new URL(document.location.href).searchParams.get("view")){case"sidebar":document.documentElement.classList.add("view-sidebar");break;case"popup":document.documentElement.classList.add("view-popup");break;default:document.documentElement.classList.add("view-tab")}const r=await(0,d.resolveNamed)({browser:a.default.runtime.getBrowserInfo?a.default.runtime.getBrowserInfo():{name:"chrome"},platform:a.default.runtime.getPlatformInfo?a.default.runtime.getPlatformInfo():{os:"unknown"},options:c.Model.live()});function u(e){const t=document.documentElement.classList;for(const e of Array.from(t))(e.startsWith("metrics-")||e.startsWith("theme-"))&&t.remove(e);t.add(`metrics-${e.state.ui_metrics}`),t.add(`theme-${e.state.ui_theme}`)}document.documentElement.classList.add(`browser-${r.browser.name.toLowerCase()}`),document.documentElement.classList.add(`os-${r.platform.os}`),u(r.options.sync),r.options.sync.onChanged.addListener(u);const h=await t(),m=(0,l.createApp)(Object.assign(Object.assign({},e),{provide:Object.assign(Object.assign({},null!==(n=e.provide)&&void 0!==n?n:{}),null!==(o=h.provide)&&void 0!==o?o:{}),methods:Object.assign(Object.assign({},null!==(s=e.methods)&&void 0!==s?s:{}),null!==(i=h.methods)&&void 0!==i?i:{})}),h.propsData);Object.assign(globalThis,{app:m,app_options:h}),m.mount("body")})))},t.pageref=function(e){return`${e}${window.location.search}`}},9504:(e,t,n)=>{"use strict";var o;t.$w=void 0;o=n(6238).inspect;const s=null!==setImmediate&&void 0!==setImmediate?setImmediate:setTimeout;let i;i={verbose:!1,waiters:new Set,ignores:new Set,awaited_messages:new Set,runner:null};class r{constructor(e,t){this._listeners=new Set,this.state=i,this.name=e,this.instance=t}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}hasListener(e){return this._listeners.has(e)}hasListeners(){return this._listeners.size>0}send(...e){const t={event:this,args:e,fire(t){!t&&i.verbose&&console.log(`[deliver ${this.event.name}/${this.event.instance}] `,...e);for(const t of this.event._listeners)t(...e)}};if(this.state.awaited_messages.add(t),a(this.state),this.state.verbose)try{throw new Error("Stack trace")}catch(t){console.log(`[send ${this.name}/${this.instance}]`,...e),console.log(t.stack)}}}t.$w=r;function a(e){e.runner||(e.runner=new Promise((t=>{s((()=>{e.runner=null,function(e){for(const t of e.awaited_messages){for(const n of e.ignores)if(n(t)){e.awaited_messages.delete(t),t.fire(!0);break}for(const n of e.waiters)if(n.filter(t)){e.awaited_messages.delete(t),t.fire(),n.callback(t);break}}}(e),t()}))})))}},5879:function(e,t){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,s){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,s,(t=e[n](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.CUR_WINDOW_MD_ID=void 0,t.CUR_WINDOW_MD_ID="",t.Model=class{constructor(e){this._kvc=e}get(e){return this._kvc.get(e)}set(e,t){return this._kvc.set(e,t)}setCollapsed(e,t){this.set(e,Object.assign(Object.assign({},this.get(e).value||{}),{collapsed:t}))}async gc(e){var t,o;const s=[];try{for(var i,r=n(this._kvc.kvs.list());!(i=await r.next()).done;){const t=i.value;e(t.key)||s.push(t.key)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=r.return)&&await o.call(r)}finally{if(t)throw t.error}}await this._kvc.kvs.delete(s)}}},2496:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.friendlyFolderName=t.genDefaultFolderName=t.getDefaultFolderNameISODate=t.Model=void 0;const s=n(357),i=o(n(3150)),r=n(6238),a=n(2348),l=n(6948);class d{constructor(e){this.by_id=new Map,this.by_url=new Map,this.stash_root=(0,s.ref)(),this.stash_root_warning=(0,s.ref)(),this.selectedCount=(0,s.computed)((()=>{let e=0;for(const t of this.selectedItems())++e;return e})),this.filter=(0,s.ref)((e=>!0)),this._stash_root_watch=new Set,this._event_since_load=!1,this.reload=(0,r.backingOff)((async()=>{function e(t,n){if(t.add(n.id),n.children)for(const o of n.children)e(t,o)}for(this._event_since_load=!0;this._event_since_load;){this._event_since_load=!1;const t=(await i.default.bookmarks.getTree())[0];this.root_id=t.id,this.whenBookmarkCreated(t.id,t);const n=new Set;e(n,t);for(const e of this.by_id.keys())n.has(e)||this.whenBookmarkRemoved(e)}})),this.stash_root_name=e;const t=new l.EventWiring(this,{onFired:()=>{this._event_since_load=!0},onError:()=>{(0,a.logErrorsFrom)((()=>this.reload()))}});t.listen(i.default.bookmarks.onCreated,this.whenBookmarkCreated),t.listen(i.default.bookmarks.onChanged,this.whenBookmarkChanged),t.listen(i.default.bookmarks.onMoved,this.whenBookmarkMoved),t.listen(i.default.bookmarks.onRemoved,this.whenBookmarkRemoved)}static async from_browser(e){e||(e="Tab Stash");const t=new d(e);return await t.reload(),t}node(e){return this.by_id.get(e)}bookmark(e){const t=this.node(e);if(t&&"url"in t)return t}folder(e){const t=this.node(e);if(t&&"children"in t)return t}bookmarksWithURL(e){let t=this.by_url.get(e);return t||(t=(0,s.reactive)(new Set),this.by_url.set(e,t)),t}positionOf(e){const t=this.folder(e.parentId);if(!t)return;const n=t.children.findIndex((t=>t===e.id));return-1!==n?{parent:t,index:n}:void 0}childrenOf(e){return(0,r.filterMap)(e.children,(e=>this.node(e)))}isNodeInFolder(e,t){let n=e;for(;n;){if(n.id===t)return!0;if(!n.parentId)break;n=this.by_id.get(n.parentId)}return!1}pathTo(e){const t=[];for(;e.parentId;){const n=(0,r.expect)(this.positionOf(e),(()=>`Can't find position of node: ${e.id}`));t.push(n),e=n.parent}return t.reverse(),t}urlsInStash(){const e=new Set,t=n=>{for(const o of n.children){const n=this.node(o);n&&("url"in n?e.add(n.url):"children"in n&&t(n))}};return this.stash_root.value&&t(this.stash_root.value),e}async create(e){const t=await i.default.bookmarks.create(e);return await(0,r.shortPoll)((()=>{const e=this.by_id.get(t.id);return e||(0,r.tryAgain)(),e}))}async remove(e){const t=this.node(e);if(!t)return;const n=this.positionOf(t);await i.default.bookmarks.remove(e),await(0,r.shortPoll)((()=>{this.by_id.has(e)&&(0,r.tryAgain)()})),n&&await this.maybeCleanupEmptyFolder(n.parent)}async removeTree(e){await i.default.bookmarks.removeTree(e),await(0,r.shortPoll)((()=>{this.by_id.has(e)&&(0,r.tryAgain)()}))}async move(e,t,n){const o=(0,r.expect)(this.node(e),(()=>`No such bookmark node: ${e}`)),s=(0,r.expect)(this.positionOf(o),(()=>`Unable to locate node ${e} in its parent`)),a=(0,r.expect)(this.folder(t),(()=>`Unable to locate destination folder: ${t}`));n=Math.min(a.children.length,Math.max(0,n)),i.default.runtime.getBrowserInfo&&o.parentId===t&&n>s.index&&n--,await i.default.bookmarks.move(e,{parentId:t,index:n}),await(0,r.shortPoll)((()=>{const e=this.positionOf(o);e||(0,r.tryAgain)(),e.parent.id===t&&e.index===n||(0,r.tryAgain)()})),await this.maybeCleanupEmptyFolder(s.parent)}async ensureStashRoot(){if(this.stash_root.value)return this.stash_root.value;await this.create({title:this.stash_root_name});const e=Date.now();let t=10,n=this._maybeUpdateStashRoot();for(;Date.now()-e<t;)n.length>1&&(await this.remove(n[1].id).catch((()=>{})),t+=10),await new Promise((e=>setTimeout(e,5*Math.random()))),n=this._maybeUpdateStashRoot();return n[0]}async createStashFolder(e){const t=await this.ensureStashRoot();return await this.create({parentId:t.id,title:null!=e?e:u(new Date),index:0})}async maybeCleanupEmptyFolder(e){null!==c(e.title)&&(e.children.length>0||this.stash_root.value&&this.isNodeInFolder(e,this.stash_root.value.id)&&await this.remove(e.id))}whenBookmarkCreated(e,t){var n,o,i,a,l;if(e!==t.id)throw new Error("Bookmark IDs don't match");const d=e,c=null!==(n=t.parentId)&&void 0!==n?n:"";c&&this.folder(c);let u=this.by_id.get(d);if(u){if(c){if(u.parentId){const e=this.positionOf(u);e&&e.parent.children.splice(e.index,1)}(0,r.expect)(this.folder(c),(()=>`Don't know about parent folder ${c}`)).children.splice(t.index,0,u.id)}"title"in u&&(u.title=t.title),"url"in u&&(this._remove_url(u),u.url=null!==(l=t.url)&&void 0!==l?l:"",this._add_url(u)),"dateAdded"in u&&(u.dateAdded=t.dateAdded)}else{const e=(0,s.computed)((()=>this.filter.value(u)));h(t)?u=(0,s.reactive)({parentId:c,id:d,dateAdded:t.dateAdded,title:null!==(o=t.title)&&void 0!==o?o:"",children:[],$visible:e,$selected:!1}):"separator"===t.type?u=(0,s.reactive)({parentId:c,id:d,dateAdded:t.dateAdded,type:"separator",title:"",$visible:e,$selected:!1}):(u=(0,s.reactive)({parentId:c,id:d,dateAdded:t.dateAdded,title:null!==(i=t.title)&&void 0!==i?i:"",url:null!==(a=t.url)&&void 0!==a?a:"",$visible:e,$selected:!1}),this._add_url(u)),this.by_id.set(u.id,u),t.parentId&&(0,r.expect)(this.folder(c),(()=>`Don't know about parent folder ${c}`)).children.splice(t.index,0,u.id)}if(h(t)&&t.children)for(const e of t.children)this.whenBookmarkCreated(e.id,e);"children"in u&&(u.title===this.stash_root_name&&this._stash_root_watch.add(u),this._stash_root_watch.has(u)&&this._maybeUpdateStashRoot())}whenBookmarkChanged(e,t){const n=(0,r.expect)(this.by_id.get(e),(()=>`Got change event for unknown node ${e}: ${JSON.stringify(t)}`));"title"in t&&(n.title=t.title,"children"in n&&n.title===this.stash_root_name&&this._stash_root_watch.add(n)),void 0!==t.url&&"url"in n&&(this._remove_url(n),n.url=t.url,this._add_url(n)),"children"in n&&this._stash_root_watch.has(n)&&this._maybeUpdateStashRoot()}whenBookmarkMoved(e,t){const n=(0,r.expect)(this.by_id.get(e),(()=>`Got move event for unknown node ${e}: ${JSON.stringify(t)}`)),o=(0,r.expect)(this.folder(t.parentId),(()=>`Move of ${e} is going to unknown folder ${t.parentId}`)),s=this.positionOf(n);s&&s.parent.children.splice(s.index,1),n.parentId=t.parentId,o.children.splice(t.index,0,n.id),"children"in n&&this._stash_root_watch.has(n)&&this._maybeUpdateStashRoot()}whenBookmarkRemoved(e){const t=this.by_id.get(e);if(!t)return;if("children"in t)for(const e of Array.from(t.children))this.whenBookmarkRemoved(e);const n=this.positionOf(t);n&&n.parent.children.splice(n.index,1),this.by_id.delete(t.id),"url"in t&&this._remove_url(t),"children"in t&&this._stash_root_watch.has(t)&&(this._stash_root_watch.delete(t),this._maybeUpdateStashRoot())}_maybeUpdateStashRoot(){let e=Array.from(this._stash_root_watch).filter((e=>e.children&&e.title===this.stash_root_name));const t=(0,r.filterMap)(e,(e=>({folder:e,path:this.pathTo(e)})));this._stash_root_watch=new Set(e);for(const e of t)for(const t of e.path)this._stash_root_watch.add(t.parent);const n=Math.min(...t.map((e=>e.path.length)));return e=t.filter((e=>e.path.length<=n)).map((e=>e.folder)).sort(((e,t)=>{var n,o;const s=(null!==(n=e.dateAdded)&&void 0!==n?n:0)-(null!==(o=t.dateAdded)&&void 0!==o?o:0);return 0!==s?s:e.id<t.id?-1:e.id>t.id?1:0})),this.stash_root.value=e[0],e.length>1?this.stash_root_warning.value={text:`You have multiple "${this.stash_root_name}" bookmark folders, and Tab Stash isn't sure which one to use.  Click here to find out how to resolve the issue.`,help:()=>i.default.tabs.create({active:!0,url:"https://github.com/josh-berry/tab-stash/wiki/Problems-Locating-the-Tab-Stash-Bookmark-Folder"})}:this.stash_root_warning.value=void 0,e}isSelected(e){return e.$selected}async clearSelection(){for(const e of this.by_id.values())e.$selected=!1}async setSelected(e,t){for(const n of e)n.$selected=t}*selectedItems(){const e=this;this.stash_root.value&&(yield*function*t(n){if(n.$selected)yield n;else if("children"in n)for(const o of n.children){const n=e.node(o);n&&(yield*t(n))}}(this.stash_root.value))}itemsInRange(e,t){let n=this.positionOf(e),o=this.positionOf(t);if(!n||!o)return null;if(n.parent!==o.parent)return null;if(o.index<n.index){const e=o;o=n,n=e}return(0,r.filterMap)(n.parent.children.slice(n.index,o.index+1),(e=>this.node(e))).filter((e=>e.$visible))}_add_url(e){this.bookmarksWithURL(e.url).add(e)}_remove_url(e){const t=this.by_url.get(e.url);t&&t.delete(e)}}function c(e){let t=e.match(/saved-([-0-9:.T]+Z)/);return t?t[1]:null}function u(e){return`saved-${e.toISOString()}`}function h(e){return"folder"===e.type||!!e.children||!("type"in e)&&!("url"in e)}t.Model=d,t.getDefaultFolderNameISODate=c,t.genDefaultFolderName=u,t.friendlyFolderName=function(e){const t=c(e);return t?`Saved ${new Date(t).toLocaleString()}`:e}},7903:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const s=n(357),i=o(n(3150)),r=n(6238),a=n(2348),l=n(6948);class d{constructor(){if(this._event_since_load=!1,this.reload=(0,r.backingOff)((async()=>{if(i.default.browserSettings)for(this._event_since_load=!0;this._event_since_load;){this._event_since_load=!1;const e=await(0,r.resolveNamed)({newtab_url:i.default.browserSettings.newTabPageOverride.get({}).then((e=>e.value)),home_url:i.default.browserSettings.homepageOverride.get({}).then((e=>e.value))});this.state.newtab_url=e.newtab_url,this.state.home_url=e.home_url}})),this.state=(0,s.reactive)({newtab_url:"about:newtab",home_url:"about:blank"}),!i.default.browserSettings)return;const e=new l.EventWiring(this,{onFired:()=>{this._event_since_load=!0},onError:()=>{(0,a.logErrorsFrom)((()=>this.reload()))}});e.listen(i.default.browserSettings.newTabPageOverride.onChange,this.whenNewTabPageChanged),e.listen(i.default.browserSettings.homepageOverride.onChange,this.whenHomepageChanged)}static async live(){const e=new d;return await e.reload(),e}isNewTabURL(e){switch(e){case this.state.newtab_url:case this.state.home_url:case"about:blank":case"about:newtab":case"chrome://newtab/":case"edge://newtab/":return!0;default:return!!e.startsWith("chrome://vivaldi-webui/startpage")}}whenNewTabPageChanged(e){this.state.newtab_url=e.value}whenHomepageChanged(e){this.state.home_url=e.value}}t.Model=d},7996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.src2state=void 0;const o=n(357),s=n(6238),i=n(3413),r=n(2496);function a(e){return(0,o.reactive)({key:e.key,deleted_at:new Date(e.value.deleted_at),deleted_from:e.value.deleted_from?Object.assign({},e.value.deleted_from):void 0,item:"children"in e.value.item?{title:(0,r.friendlyFolderName)(e.value.item.title),children:e.value.item.children}:e.value.item})}t.src2state=a,t.Model=class{constructor(e){this.state=(0,o.reactive)({fullyLoaded:!1,entries:[],recentlyDeleted:0}),this._entry_cache=new Map,this.loadMore=(0,s.nonReentrant)((async()=>{const e=this._filter,t=this.state.entries.length;let n=this.state.entries.length>0?this.state.entries[this.state.entries.length-1].key:void 0;for(;t===this.state.entries.length&&e===this._filter;){const e=await this._kvs.getEndingAt(n,10);for(const t of e)this._filter&&!this._filter(t.value.item)||this._update(t)||this._insert(t);if(0===e.length){this.state.fullyLoaded=!0;break}n=e[e.length-1].key}})),this._kvs=e,e.onSet.addListener((e=>this.onSet(e))),e.onDelete.addListener((e=>this.onDelete(e))),e.onSyncLost.addListener((()=>this.onSyncLost()))}onSet(e){for(const t of e){if(this._update(t))continue;if(this._filter&&!this._filter(t.value.item))continue;const e=new Date(t.value.deleted_at),n=this.state.entries.length>0?this.state.entries[this.state.entries.length-1]:void 0;!n||e.valueOf()<n.deleted_at.valueOf()?this.state.fullyLoaded=!1:this._insert(t)}}onDelete(e){for(const t of e)this._entry_cache.delete(t);const t=new Set(e);this.state.entries=this.state.entries.filter((({key:e})=>!t.has(e))),"object"==typeof this.state.recentlyDeleted&&e.includes(this.state.recentlyDeleted.key)&&(this.state.recentlyDeleted=0)}onSyncLost(){this.state.entries=[],this.state.fullyLoaded=!1}filter(e){this.state.fullyLoaded=!1,this.state.entries=[],this._entry_cache=new Map,this._filter=e}async add(e,t,n){n||(n=new Date);const o={key:c(n),value:{deleted_at:n.toISOString(),deleted_from:t,item:JSON.parse(JSON.stringify(e))}};return await this._kvs.set([o]),0===this.state.recentlyDeleted?this.state.recentlyDeleted=a(o):"object"==typeof this.state.recentlyDeleted?this.state.recentlyDeleted=2:++this.state.recentlyDeleted,this._clear_recently_deleted_timeout&&clearTimeout(this._clear_recently_deleted_timeout),this._clear_recently_deleted_timeout=setTimeout((()=>{this.state.recentlyDeleted=0,this._clear_recently_deleted_timeout=void 0}),8e3),o}drop(e){return this._kvs.delete([e])}async dropChildItem(e,t){const n=this._entry_cache.get(e);if(!n)throw new Error(`${e}: Record not loaded or doesn't exist`);if(!("children"in n.item))throw new Error(`${e}: Not a folder`);const o=JSON.parse(JSON.stringify(n.item.children));o.splice(t,1),await this._kvs.set([{key:e,value:{deleted_at:n.deleted_at.toISOString(),item:{title:n.item.title,children:o}}}])}async dropOlderThan(e){for(;;){const t=[];for(const n of await this._kvs.getStartingFrom(void 0,50))Date.parse(n.value.deleted_at)<e&&t.push(n.key);if(!(t.length>0))break;await this._kvs.delete(t)}}_insert(e){var t;const n=a(e);return this._entry_cache.set(e.key,n),n.deleted_at>(null===(t=this.state.entries[0])||void 0===t?void 0:t.deleted_at)?this.state.entries.unshift(n):(this.state.entries.push(n),this.state.entries.sort(((e,t)=>t.deleted_at.valueOf()-e.deleted_at.valueOf()))),n}_update(e){const t=this._entry_cache.get(e.key);if(t)return t.deleted_at=new Date(e.value.deleted_at),t.item=e.value.item,t}async makeFakeData_testonly(e,t=1){let n=Date.now();const o=["back.svg","cancel.svg","collapse-closed.svg","delete.svg","logo.svg","mainmenu.svg","new-empty-group.svg","restore-del.svg","stash-one.svg","stash.svg"],s=["deleted","internal","cat","nonsense","wakka","yakko","dot","gazebo","meow","mew","bark","widget","boat","car","rental","code","monad","block","function","trivia","noise","signal"],i=e=>e[Math.floor(Math.random()*e.length)],r=()=>`${i(s)} ${i(s)} ${i(s)}`,a=()=>`https://${i(s)}.internet/${i(s)}/${i(s)}/${i(s)}.html`,l=()=>`icons/light/${i(o)}`;let d=[];for(let o=0;o<e;++o){const e=new Date(n),o=c(e);n-=Math.floor(6*Math.random()*60*60*1e3),Math.random()<.5?d.push({key:o,value:{deleted_at:e.toISOString(),item:{title:r(),children:(()=>{const e=[];for(let t=0;t<10*Math.random()+1;++t)e.push({title:r(),url:a(),favIconUrl:l()});return e})()}}}):d.push({key:o,value:{deleted_at:e.toISOString(),deleted_from:{folder_id:i(s),title:r()},item:{title:r(),url:a(),favIconUrl:l()}}}),d.length>=t&&(await this._kvs.set(d),d=[])}d.length>0&&await this._kvs.set(d)}};let l=0,d=Date.now();function c(e){return e.valueOf()!==d&&(l=0,d=e.valueOf()),l++,`${e.toISOString()}-${(1e6-l).toString().padStart(6,"0")}-${(0,i.makeRandomString)(4)}`}},6122:function(e,t,n){"use strict";var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,s){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,s,(t=e[n](t)).done,t.value)}))}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const i=s(n(3150)),r=n(6238),a=n(2348);t.Model=class{constructor(e){this._kvc=e,i.default.tabs.onCreated.addListener((e=>this._updateFavicon(e))),i.default.tabs.onUpdated.addListener(((e,t,n)=>this._updateFavicon(n))),(0,a.logErrorsFrom)((async()=>{for(const e of await i.default.tabs.query({}))this._updateFavicon(e)}))}async gc(e){var t,n;const s=[];try{for(var i,r=o(this._kvc.kvs.list());!(i=await r.next()).done;){const t=i.value;e(t.key)||s.push(t.key)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&await n.call(r)}finally{if(t)throw t.error}}await this._kvc.kvs.delete(s)}get(e){return this._kvc.get((0,r.urlToOpen)(e))}set(e,t){return this._kvc.set(e,{favIconUrl:t})}maybeSet(e,t){this._kvc.maybeInsert(e,{favIconUrl:t})}_updateFavicon(e){e.url&&e.favIconUrl&&"complete"===e.status&&this.set(e.url,e.favIconUrl)}}},2726:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.copying=t.copyIf=t.Model=t.isBookmark=t.isTab=t.BookmarkMetadata=t.Favicons=t.DeletedItems=t.Bookmarks=t.Tabs=t.Options=t.BrowserSettings=void 0;const a=r(n(3150)),l=n(6238),d=n(2348),c=i(n(7903));t.BrowserSettings=c;const u=i(n(4355));t.Options=u;const h=i(n(1799));t.Tabs=h;const m=i(n(2496));t.Bookmarks=m;const f=i(n(7996));t.DeletedItems=f;const p=i(n(6122));t.Favicons=p;const v=i(n(5879));t.BookmarkMetadata=v;const g=i(n(8744));function b(e){return!!e&&"number"==typeof e.id}function w(e){return!!e&&"string"==typeof e.id}function y(e,t){return e?_(t):t}function _(e){return e.map((({title:e,url:t})=>({title:e,url:t})))}function k(e){const t=(0,l.urlToOpen)(e);return n=>{if(!n||!n.url)return!1;const o=(0,l.urlToOpen)(n.url);return n.url===e||n.url===t||o===e||o===t}}t.isTab=b,t.isBookmark=w,t.Model=class{constructor(e){this.reload=(0,l.backingOff)((async()=>{await Promise.all([this.tabs.reload(),this.bookmarks.reload(),this.browser_settings.reload()])})),this.browser_settings=e.browser_settings,this.options=e.options,this.tabs=e.tabs,this.bookmarks=e.bookmarks,this.deleted_items=e.deleted_items,this.favicons=e.favicons,this.bookmark_metadata=e.bookmark_metadata,this.selection=new g.Model([this.tabs,this.bookmarks])}async attempt(e){try{return await e()}catch(e){throw(0,d.logError)(e),(0,d.logErrorsFrom)((async()=>this.reload())),e}}item(e){if("string"==typeof e)return this.bookmarks.node(e);if("number"==typeof e)return this.tabs.tab(e);throw new Error(`Invalid model ID: ${e}`)}isURLStashable(e){if(!e)return!1;if(this.browser_settings.isNewTabURL(e))return!1;try{new URL(e)}catch(e){return!1}return!e.startsWith(a.default.runtime.getURL(""))}mostRecentUnnamedFolder(){const e=this.bookmarks.stash_root.value;if(!e)return;const t=e.children&&void 0!==e.children[0]?this.bookmarks.node(e.children[0]):void 0;if(!t||!("children"in t))return;if(!m.getDefaultFolderNameISODate(t.title))return;const n=Date.now()-60*this.options.sync.state.new_folder_timeout_min*1e3;return t.dateAdded<n?void 0:t}*selectedItems(){for(const e of this.tabs.selectedItems())yield e;for(const e of this.bookmarks.selectedItems())yield e}stashableTabsInWindow(e){const t=(0,l.expect)(this.tabs.window(e),(()=>`Trying to stash tabs to unknown window ${e}`)),n=this.tabs.tabsIn(t).filter((e=>!e.hidden));let o=n.filter((e=>e.highlighted));return o.length<=1&&(o=n.filter((e=>this.isURLStashable(e.url)))),o.filter((e=>!e.pinned))}setFilter(e){const t=(0,l.textMatcher)(e);this.bookmarks.filter.value=e=>{if(t(e.title))return!0;if("url"in e){if(t(e.url))return!0}else if("children"in e&&e.children.find((e=>{var t;return null===(t=this.bookmarks.node(e))||void 0===t?void 0:t.$visible})))return!0;return!1},this.tabs.filter.value=e=>!!e.title&&t(e.title)||!!e.url&&t(e.url)}async gc(){const e=Date.now()-24*this.options.sync.state.deleted_items_expiration_days*60*60*1e3;await this.deleted_items.dropOlderThan(e),await this.favicons.gc((e=>this.bookmarks.bookmarksWithURL(e).size>0||this.tabs.tabsWithURL(e).size>0)),await this.bookmark_metadata.gc((e=>e===v.CUR_WINDOW_MD_ID||!!this.bookmarks.node(e)))}async putSelectedInWindow(e){await this.putItemsInWindow({items:y(e.copy,Array.from(this.selectedItems()))})}async putSelectedInFolder(e){await this.putItemsInFolder({items:y(e.copy,Array.from(this.selectedItems())),toFolderId:e.toFolderId})}async hideOrCloseStashedTabs(e){if(await this.tabs.refocusAwayFromTabs(e),await Promise.all(e.map((e=>a.default.tabs.update(e,{highlighted:!1})))),await this.tabs.setSelected((0,l.filterMap)(e,(e=>this.tabs.tab(e))),!1),a.default.tabs.hide)switch(this.options.local.state.after_stashing_tab){case"hide_discard":await a.default.tabs.hide(e),await a.default.tabs.discard(e);break;case"close":await this.tabs.remove(e);break;default:await a.default.tabs.hide(e)}else await this.tabs.remove(e)}async restoreTabs(e,t){var n;const o=this.tabs.targetWindow.value;if(void 0===o)throw new Error("No target window; not sure where to restore tabs");const s=(0,l.expect)(this.tabs.window(o),(()=>`Target window ${o} is unknown to the model`));if(!t.background&&1===e.length&&e[0]){const t=Array.from(this.tabs.tabsWithURL(e[0])).find((t=>t.url===e[0]&&!t.hidden&&t.windowId===o));if(t)return await a.default.tabs.update(t.id,{active:!0}),[t]}const i=new Set((0,l.filterMap)(e,(e=>e))),r=this.tabs.tabsIn(s).filter((e=>e.active))[0],d=await this.putItemsInWindow({items:Array.from(i).map((e=>({url:e}))),toWindowId:o});return t.background||(d.length>0&&await a.default.tabs.update(d[d.length-1].id,{active:!0}),r&&d.length>0&&this.browser_settings.isNewTabURL(null!==(n=r.url)&&void 0!==n?n:"")&&"complete"===r.status&&a.default.tabs.remove([r.id]).catch(console.log)),d}async ensureRecentUnnamedFolder(){const e=this.mostRecentUnnamedFolder();return void 0!==e?e:await this.bookmarks.createStashFolder()}async putItemsInFolder(e){var t;const n=(0,l.expect)(this.bookmarks.folder(e.toFolderId),(()=>`Destination folder does not exist: ${e.toFolderId}`)),o=e.items;e.task&&(e.task.max=e.items.length);const s=[],i=[];for(let r=0,a=null!==(t=e.toIndex)&&void 0!==t?t:n.children.length;r<o.length;++r,++a,e.task&&++e.task.value){const e=o[r],t=void 0!==e.id?this.item(e.id):void 0;if(w(t)){const e=this.bookmarks.positionOf(t);await this.bookmarks.move(t.id,n.id,a),s.push(t),e&&e.parent===n&&e.index<a&&--a;continue}b(e)&&i.push(e.id);const l=await this.bookmarks.create({title:e.title||e.url,url:e.url,parentId:n.id,index:a});s.push(l),await this.bookmarks.setSelected([l],!!e.$selected)}return await this.hideOrCloseStashedTabs(i),s}async putItemsInWindow(e){var t,n,o;const s=null!==(t=e.toWindowId)&&void 0!==t?t:this.tabs.targetWindow.value;if(void 0===s)throw new Error(`No target window available: ${s}`);const i=(0,l.expect)(this.tabs.window(s),(()=>`Trying to put items in unknown window ${s}`)),r=e.items,d=(null===(n=a.default.sessions)||void 0===n?void 0:n.getRecentlyClosed)&&this.options.local.state.ff_restore_closed_tabs?await a.default.sessions.getRecentlyClosed():[];e.task&&(e.task.max=r.length+1);const c=new Set((0,l.filterMap)(r,(e=>{if(b(e))return e.id}))),u=[],h=[];for(let t=0,n=null!==(o=e.toIndex)&&void 0!==o?o:i.tabs.length;t<r.length;++t,++n,e.task&&++e.task.value){const e=r[t],o=void 0!==e.id?this.item(e.id):void 0;if(b(o)){const e=this.tabs.positionOf(o);await this.tabs.move(o.id,s,n),u.push(o),c.add(o.id),e&&e.window===i&&e.index<n&&--n;continue}w(o)&&h.push(o);const m=e.url;if(!m){--n;continue}const f=Array.from(this.tabs.tabsWithURL(m)).filter((e=>!c.has(e.id)&&!e.pinned&&(e.hidden||e.windowId===s))).sort(((e,t)=>-e.hidden- -t.hidden));if(f.length>0){const t=f[0],o=this.tabs.positionOf(t);t.hidden&&a.default.tabs.show&&await a.default.tabs.show(t.id),await a.default.tabs.move(t.id,{windowId:s,index:n}),o&&o.window===i&&o.index<n&&--n,u.push(t),c.add(t.id),await this.tabs.setSelected([t],!!e.$selected);continue}const p=(0,l.filterMap)(d,(e=>e.tab)).find(k(m));if(p){console.log(`Restoring recently-closed tab for URL: ${m}`,p);const t=this.tabs.tabsIn(i).find((e=>e.active)),o=(await a.default.sessions.restore(p.sessionId)).tab;await a.default.tabs.move(o.id,{windowId:s,index:n}),t&&await a.default.tabs.update(t.id,{active:!0});const r=await(0,l.shortPoll)((()=>this.tabs.tab(o.id)||(0,l.tryAgain)()));u.push(r),c.add(r.id),await this.tabs.setSelected([r],!!e.$selected);continue}const v=await this.tabs.create({active:!1,url:(0,l.urlToOpen)(m),windowId:s,index:n});u.push(v),c.add(v.id),await this.tabs.setSelected([v],!!e.$selected)}const m=new Date;return await Promise.all(h.map((e=>this.deleteBookmark(e,m)))),e.task&&++e.task.value,u}async deleteItems(e){const t=new Date,n=[];for(const o of e)if("string"==typeof o){const e=this.bookmarks.node(o);if(!e)continue;"children"in e?await this.deleteBookmarkTree(o,t):"url"in e?await this.deleteBookmark(e,t):await this.bookmarks.remove(o)}else n.push(o);await this.tabs.remove(n)}async deleteBookmarkTree(e,t){const n=this.bookmarks.node(e);if(!n)return;const o=e=>{var t;return"children"in e?{title:e.title,children:(0,l.filterMap)(e.children,(e=>e&&this.bookmarks.node(e))).map((e=>o(e)))}:"url"in e?{title:e.title,url:e.url,favIconUrl:(null===(t=this.favicons.get(e.url).value)||void 0===t?void 0:t.favIconUrl)||void 0}:{title:"",url:""}};await this.deleted_items.add(o(n),void 0,t),await this.bookmarks.removeTree(n.id)}async deleteBookmark(e,t){var n,o,s,i;const r=this.bookmarks.folder(e.parentId);await this.deleted_items.add({title:null!==(n=e.title)&&void 0!==n?n:"<no title>",url:null!==(o=e.url)&&void 0!==o?o:"about:blank",favIconUrl:(null===(i=null===(s=this.favicons.get(e.url))||void 0===s?void 0:s.value)||void 0===i?void 0:i.favIconUrl)||void 0},r?{folder_id:r.id,title:r.title}:void 0,t),await this.bookmarks.remove(e.id)}async undelete(e){const t=this.deleted_items;"object"==typeof t.state.recentlyDeleted&&t.state.recentlyDeleted.key===e.key&&(t.state.recentlyDeleted=0);const n=await this.bookmarks.ensureStashRoot();if("children"in e.item){const t=await this.bookmarks.create({parentId:n.id,title:e.item.title,index:0});await this.putItemsInFolder({items:e.item.children,toFolderId:t.id});for(const t of e.item.children)"url"in t&&t.favIconUrl&&this.favicons.maybeSet(t.url,t.favIconUrl)}else{let t;if(e.deleted_from){const o=e.deleted_from;if(this.bookmarks.folder(o.folder_id))t=o.folder_id;else{const e=this.bookmarks.childrenOf(n).find((e=>"children"in e&&e.title===o.title));e&&(t=e.id)}}t||(t=(await this.ensureRecentUnnamedFolder()).id),await this.putItemsInFolder({items:[e.item],toFolderId:t}),e.item.favIconUrl&&this.favicons.maybeSet(e.item.url,e.item.favIconUrl)}await t.drop(e.key)}async undeleteChild(e,t){if(!("children"in e.item))throw new Error(`Deletion ${e.key} is not a folder`);const n=e.item.children[t];n&&(await this.putItemsInFolder({items:[n],toFolderId:(await this.ensureRecentUnnamedFolder()).id}),"url"in n&&n.favIconUrl&&this.favicons.maybeSet(n.url,n.favIconUrl),await this.deleted_items.dropChildItem(e.key,t))}},t.copyIf=y,t.copying=_},4355:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.LOCAL_DEF=t.SYNC_DEF=t.SHOW_WHAT_DEFAULT=t.STASH_WHAT_OPT=t.SHOW_WHAT_OPT=void 0;const a=r(n(3150)),l=n(357),d=n(6238),c=n(2348),u=i(n(6913));t.SHOW_WHAT_OPT=(0,u.anEnum)("sidebar","tab","popup","none"),t.STASH_WHAT_OPT=(0,u.anEnum)("all","single","none"),t.SHOW_WHAT_DEFAULT=a.default.sidebarAction?"sidebar":"tab",t.SYNC_DEF={meta_show_advanced:{default:!1,is:u.aBoolean},open_stash_in:{default:t.SHOW_WHAT_DEFAULT,is:t.SHOW_WHAT_OPT},browser_action_stash:{default:"all",is:t.STASH_WHAT_OPT},browser_action_show:{default:t.SHOW_WHAT_DEFAULT,is:t.SHOW_WHAT_OPT},show_all_open_tabs:{default:!1,is:u.aBoolean},ui_metrics:{default:"normal",is:(0,u.anEnum)("normal","compact")},ui_theme:{default:"system",is:(0,u.anEnum)("system","light","dark")},new_folder_timeout_min:{default:5,is:u.aNumber},deleted_items_expiration_days:{default:180,is:u.aNumber}},t.LOCAL_DEF={last_notified_version:{default:void 0,is:(0,u.maybeUndef)(u.aString)},after_stashing_tab:{default:"hide",is:(0,u.anEnum)("hide","hide_discard","close")},autodiscard_hidden_tabs:{default:!0,is:u.aBoolean},autodiscard_interval_min:{default:2,is:u.aNumber},autodiscard_min_keep_tabs:{default:10,is:u.aNumber},autodiscard_target_tab_count:{default:50,is:u.aNumber},autodiscard_target_age_min:{default:10,is:u.aNumber},hide_crash_reports_until:{default:void 0,is:(0,u.maybeUndef)(u.aNumber)},ff_popup_view:{default:!1,is:u.aBoolean},ff_restore_closed_tabs:{default:!1,is:u.aBoolean}};class h{constructor(e){this.showCrashReport=(0,l.computed)((()=>{const e=this.local.state.hide_crash_reports_until||0;return this._now.value<e?(setTimeout((()=>{this._now.value=Date.now()}),e-this._now.value+1),!1):c.errorLog.length>0})),this._now=(0,l.ref)(Date.now()),this.sync=e.sync,this.local=e.local}static async live(){return new h(await(0,d.resolveNamed)({sync:(0,u.default)("sync","options",t.SYNC_DEF),local:(0,u.default)("local","options",t.LOCAL_DEF)}))}}t.Model=h},8744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const o=n(357);t.Model=class{constructor(e){this.selectedCount=(0,o.computed)((()=>this.models.reduce(((e,t)=>e+t.selectedCount.value),0))),this.models=Array.from(e)}async clearSelection(){this.lastSelected=void 0,await Promise.all(this.models.map((e=>e.clearSelection())))}async toggleSelectFromEvent(e,t,n){return e.shiftKey?this.toggleSelectRange(t,n):e.ctrlKey||e.metaKey?this.toggleSelectOne(t,n):this.toggleSelectScattered(t,n)}async toggleSelectOne(e,t){const n=e.isSelected(t),o=this.selectedCount.value;await this.clearSelection(),1==o&&n||(await e.setSelected([t],!0),this.lastSelected={model:e,item:t})}async toggleSelectScattered(e,t){await e.setSelected([t],!e.isSelected(t)),this.lastSelected={model:e,item:t}}async toggleSelectRange(e,t){if(!this.lastSelected||this.lastSelected.model!==e)return await this.toggleSelectScattered(e,t);const n=e.itemsInRange(this.lastSelected.item,t);if(!n)return await this.toggleSelectScattered(e,t);const o=e.isSelected(this.lastSelected.item);if(this.lastSelected.lastMultiSelect){const t=new Set(this.lastSelected.lastMultiSelect);for(const e of n)t.delete(e);await e.setSelected(t,!o)}const s=new Set(n);if(this.lastSelected.lastMultiSelect)for(const e of this.lastSelected.lastMultiSelect)s.delete(e);this.lastSelected.lastMultiSelect=n,await e.setSelected(s,o)}}},1799:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const s=n(357),i=o(n(3150)),r=n(6238),a=n(2348),l=n(6948);class d{constructor(e){this.windows=new Map,this.tabs=new Map,this.tabs_by_url=new Map,this.initialWindow=(0,s.ref)(),this.focusedWindow=(0,s.ref)(),this.targetWindow=(0,s.computed)((()=>{var e;return null!==(e=this.initialWindow.value)&&void 0!==e?e:this.focusedWindow.value})),this.filter=(0,s.ref)((e=>!0)),this.selectedCount=(0,s.computed)((()=>{let e=0;for(const t of this.selectedItems())++e;return e})),this._event_since_load=!1,this.reload=(0,r.backingOff)((async()=>{for(this._event_since_load=!0;this._event_since_load;){this._event_since_load=!1;const e=await i.default.windows.getCurrent();this.focusedWindow.value=e.id;let t=await i.default.tabs.query({});t=t.sort(((e,t)=>e.index-t.index));for(const e of t)this.whenTabCreated(e);const n=new Set(this.tabs.keys()),o=new Set(this.windows.keys());for(const e of t)n.delete(e.id),o.delete(e.windowId);for(const e of n)this.whenTabRemoved(e);for(const e of o)this.whenWindowRemoved(e)}})),this.initialWindow.value=e;const t=new l.EventWiring(this,{onFired:()=>{this._event_since_load=!0},onError:()=>{(0,a.logErrorsFrom)((()=>this.reload()))}});t.listen(i.default.windows.onCreated,this.whenWindowCreated),t.listen(i.default.windows.onFocusChanged,this.whenWindowFocusChanged),t.listen(i.default.windows.onRemoved,this.whenWindowRemoved),t.listen(i.default.tabs.onCreated,this.whenTabCreated),t.listen(i.default.tabs.onUpdated,this.whenTabUpdated),t.listen(i.default.tabs.onAttached,this.whenTabAttached),t.listen(i.default.tabs.onMoved,this.whenTabMoved),t.listen(i.default.tabs.onReplaced,this.whenTabReplaced),t.listen(i.default.tabs.onActivated,this.whenTabActivated),t.listen(i.default.tabs.onHighlighted,this.whenTabsHighlighted),t.listen(i.default.tabs.onRemoved,this.whenTabRemoved)}static async from_browser(e){const t=e?void 0:await i.default.windows.getCurrent(),n=new d(null==t?void 0:t.id);return await n.reload(),n}window(e){return this.windows.get(e)}tab(e){return this.tabs.get(e)}tabsIn(e){return(0,r.filterMap)(e.tabs,(e=>this.tab(e)))}positionOf(e){const t=this.window(e.windowId);if(!t)return;const n=t.tabs.findIndex((t=>t===e.id));return-1!==n?{window:t,index:n}:void 0}activeTab(e){if(void 0===e&&(e=this.targetWindow.value),void 0===e)return;const t=this.window(e);return t?(0,r.filterMap)(t.tabs,(e=>this.tab(e))).filter((e=>e.active))[0]:void 0}tabsWithURL(e){let t=this.tabs_by_url.get(e);return t||(t=(0,s.reactive)(new Set),this.tabs_by_url.set(e,t)),t}async create(e){const t=await i.default.tabs.create(e);return await(0,r.shortPoll)((()=>this.tabs.get(t.id)||(0,r.tryAgain)()))}async move(e,t,n){const o=(0,r.expect)(this.tab(e),(()=>`Tab ${e} does not exist`));if(o.windowId===t){const e=this.positionOf(o);e&&n>e.index&&n--}await i.default.tabs.move(e,{windowId:t,index:n}),await(0,r.shortPoll)((()=>{const e=this.positionOf(o);e||(0,r.tryAgain)(),e.window.id===t&&e.index===n||(0,r.tryAgain)()}))}async remove(e){await this.refocusAwayFromTabs(e),await i.default.tabs.remove(e),await(0,r.shortPoll)((()=>{void 0!==e.find((e=>this.tabs.has(e)))&&(0,r.tryAgain)()}))}async refocusAwayFromTabs(e){const t=(0,r.filterMap)(e,(e=>this.tabs.get(e))),n=t.filter((e=>e.active));for(const o of n){const n=(0,r.expect)(this.window(o.windowId),(()=>`Couldn't find parent window for active tab ${o.id}`)),s=(0,r.filterMap)(n.tabs,(e=>this.tab(e))).filter((e=>!e.hidden&&!e.pinned));if(t.filter((e=>e.windowId===o.windowId)).length>=s.length)await i.default.tabs.create({active:!0,windowId:o.windowId});else{const t=(0,r.expect)(this.positionOf(o),(()=>`Couldn't find position of active tab ${o.id}`));let n=s.slice(t.index+1),a=n.find((t=>void 0!==t.id&&!e.find((e=>t.id===e))));a||(n=s.slice(0,t.index).reverse(),a=n.find((t=>void 0!==t.id&&!e.find((e=>t.id===e))))),console.assert(a),a&&await i.default.tabs.update(a.id,{active:!0})}}}whenWindowCreated(e){const t=e.id;let n=this.windows.get(t);if(n||(n=(0,s.reactive)({id:t,tabs:[]}),this.windows.set(t,n)),void 0!==e.tabs)for(const t of e.tabs)this.whenTabCreated(t);return n}whenWindowFocusChanged(e){this.focusedWindow.value=e!==i.default.windows.WINDOW_ID_NONE?e:void 0}whenWindowRemoved(e){const t=this.windows.get(e);if(t){this.initialWindow.value===e&&(this.initialWindow.value=void 0),this.focusedWindow.value===e&&(this.focusedWindow.value=void 0);for(const e of Array.from(t.tabs))this.whenTabRemoved(e);this.windows.delete(e)}}whenTabCreated(e){var t,n,o,i,r,a,l,d,c,u,h,m;let f=this.tabs.get(e.id);if(f){if(this.windows.get(e.windowId)){const e=this.positionOf(f);e&&e.window.tabs.splice(e.index,1)}this._remove_url(f),f.windowId=e.windowId,f.status=null!==(l=e.status)&&void 0!==l?l:"loading",f.title=null!==(d=e.title)&&void 0!==d?d:"",f.url=null!==(c=e.url)&&void 0!==c?c:"",f.favIconUrl=null!==(u=e.favIconUrl)&&void 0!==u?u:"",f.pinned=e.pinned,f.hidden=null!==(h=e.hidden)&&void 0!==h&&h,f.active=e.active,f.highlighted=e.highlighted,f.discarded=null!==(m=e.discarded)&&void 0!==m&&m}else f=(0,s.reactive)({windowId:e.windowId,id:e.id,status:null!==(t=e.status)&&void 0!==t?t:"loading",title:null!==(n=e.title)&&void 0!==n?n:"",url:null!==(o=e.url)&&void 0!==o?o:"",favIconUrl:null!==(i=e.favIconUrl)&&void 0!==i?i:"",pinned:e.pinned,hidden:null!==(r=e.hidden)&&void 0!==r&&r,active:e.active,highlighted:e.highlighted,discarded:null!==(a=e.discarded)&&void 0!==a&&a,$selected:!1,$visible:(0,s.computed)((()=>this.filter.value(f)))}),this.tabs.set(e.id,f);const p=e.windowId;let v=this.windows.get(p);v||(v=(0,s.reactive)({id:p,tabs:[]}),this.windows.set(p,v)),v.tabs.splice(e.index,0,e.id),this._add_url(f)}whenTabUpdated(e,t){const n=(0,r.expect)(this.tab(e),(()=>`Got change event for unknown tab ${e}`));void 0!==t.status&&(n.status=t.status),void 0!==t.title&&(n.title=t.title),void 0!==t.url&&(this._remove_url(n),n.url=t.url,this._add_url(n)),void 0!==t.favIconUrl&&(n.favIconUrl=t.favIconUrl),void 0!==t.pinned&&(n.pinned=t.pinned),void 0!==t.hidden&&(n.hidden=t.hidden),void 0!==t.discarded&&(n.discarded=t.discarded)}whenTabAttached(e,t){this.whenTabMoved(e,{windowId:t.newWindowId,toIndex:t.newPosition})}whenTabMoved(e,t){const n=(0,r.expect)(this.tab(e),(()=>`Got move event for unknown tab ${e}`)),o=this.positionOf(n);o&&o.window.tabs.splice(o.index,1);let s=this.window(t.windowId);s||(s=this.whenWindowCreated({id:t.windowId,focused:!1,incognito:!1,alwaysOnTop:!1})),n.windowId=t.windowId,s.tabs.splice(t.toIndex,0,n.id)}whenTabReplaced(e,t){const n=(0,r.expect)(this.tab(t),(()=>`Got replace event for unknown tab ${t} (-> ${e})`)),o=this.positionOf(n);o&&(o.window.tabs[o.index]=e),n.id=e,this.tabs.delete(t),this.tabs.set(n.id,n)}whenTabActivated(e){const t=(0,r.expect)(this.tab(e.tabId),(()=>`Got activated event for unknown tab ${e.tabId}`)),n=this.window(e.windowId);if(n)for(const e of this.tabsIn(n))e.active=!1;t.active=!0}whenTabsHighlighted(e){const t=(0,r.expect)(this.window(e.windowId),(()=>`Got highlighted event for unknown window ${e.windowId}`));for(const n of this.tabsIn(t))n.highlighted=-1!==e.tabIds.findIndex((e=>e===n.id))}whenTabRemoved(e){const t=this.tabs.get(e);if(!t)return;const n=this.positionOf(t);this.tabs.delete(t.id),n&&n.window.tabs.splice(n.index,1),this._remove_url(t)}_add_url(e){this.tabsWithURL(e.url).add(e)}_remove_url(e){const t=this.tabs_by_url.get(e.url);t&&t.delete(e)}isSelected(e){return e.$selected}async clearSelection(){for(const e of this.tabs.values())e.$selected=!1}async setSelected(e,t){for(const n of e)n.$selected=t}*selectedItems(){if(void 0===this.targetWindow.value)return;const e=this.window(this.targetWindow.value);if(e)for(const t of this.tabsIn(e))t.$selected&&(yield t)}itemsInRange(e,t){if(void 0===this.targetWindow.value)return null;if(e.windowId!==this.targetWindow.value)return null;if(t.windowId!==this.targetWindow.value)return null;const n=this.window(this.targetWindow.value);if(!n)return null;let o=this.positionOf(e),s=this.positionOf(t);if(!o||!s)return null;if(s.index<o.index){const e=s;s=o,o=e}return this.tabsIn(n).slice(o.index,s.index+1).filter((e=>!e.hidden&&!e.pinned&&e.$visible))}}t.Model=d},6825:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(3150)),i=n(6238),r=o(n(8005));(0,o(n(3770)).default)(n(4259).Z,(async()=>{const e=await(0,i.resolveNamed)({model:(0,r.default)(),ext_info:s.default.management.getSelf()});return{propsData:{my_version:e.ext_info.version},provide:{$model:e.model},methods:{model:()=>e.model}}}))},6439:function(e,t,n){"use strict";var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,s){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,s,(t=e[n](t)).done,t.value)}))}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.importURLs=t.extractURLs=t.parse=void 0;const i=s(n(3150)),r=n(6238),a=n(8837),l=/[a-zA-Z][-a-zA-Z0-9+.]*:\/\/[^\]\) \t\n\r"'>]+/g,d=/^#+ (.*)$/;t.parse=function(e,t,n){const o=new c(t,n);return o.parseChildren(e),o.end()};class c{constructor(e,t){this.options={splitOn:"p+h"},this.building={urls:[]},this.built=[],this.afterBR=!1,this.model=e,t&&(this.options=Object.assign({},this.options,t))}end(){return this.endGroup(),this.built.map((e=>(e.urls=Array.from(new Set(e.urls.filter((e=>this.model.isURLStashable(e))))),e))).filter((e=>e.urls.length>0))}endGroup(e){this.built.push(this.building),this.building={title:e,urls:[]}}parseChildren(e){var t,n;for(const o of e.childNodes)switch(o.nodeType){case Node.ELEMENT_NODE:const e=o;this.parseElement(e);break;case Node.TEXT_NODE:const s=null===(t=o.nodeValue)||void 0===t?void 0:t.trim();if(!s)continue;if(this.afterBR=!1,["h","p+h"].includes(this.options.splitOn)){const e=s.match(d);e&&this.endGroup(null===(n=e[1])||void 0===n?void 0:n.trim())}for(const e of u(s))this.building.urls.push(e)}}parseElement(e){var t;switch(e.localName){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":["h","p+h"].includes(this.options.splitOn)?this.endGroup(null!==(t=e.textContent)&&void 0!==t?t:void 0):this.parseChildren(e);break;case"p":this.parseChildren(e),"p+h"===this.options.splitOn&&this.endGroup();break;case"br":this.afterBR?("p+h"===this.options.splitOn&&this.endGroup(),this.afterBR=!1):this.afterBR=!0,this.parseChildren(e);break;case"a":const n=e;n.href&&this.building.urls.push(n.href),this.parseChildren(e);break;default:this.parseChildren(e)}"br"!==e.localName&&(this.afterBR=!1)}}function*u(e){const t=new RegExp(l);let n;for(;null!==(n=t.exec(e));)yield n[0]}function h(e){return e.reduce(((e,t)=>e.concat(t)),[])}t.extractURLs=u,t.importURLs=async function(e,t,n){const s=n;n.status="Importing tabs...",n.max=100;const l=t.reverse(),d=h(l.map((e=>e.urls))),c=new Set(d),u=n.wspawn(25,(async t=>{t.status="Creating stash folders...",t.max=l.length;const n=[];for(const o of l){if(t.cancelled)break;const s=await t.spawn((async t=>{const n=await e.bookmarks.createStashFolder(o.title);return{folder:n,bookmarks:await e.putItemsInFolder({items:o.urls.map((e=>({url:e,title:"Importing..."}))),toFolderId:n.id,task:t})}}));n.push(s)}return{bookmarks:h(n.map((e=>(0,r.filterMap)(e.bookmarks,(e=>"url"in e?e:void 0))))),folderIds:n.map((e=>e.folder.id)).filter((e=>e))}})),m=n.wspawn_iter(50,(e=>(0,a.fetchInfoForSites)(c,e))),f=n.wspawn(25,(async t=>{var n,r,a;t.status="Updating bookmarks...";const{bookmarks:l,folderIds:d}=await u,c=new Map;t.max=l.length;for(const e of l){const t=c.get(e.url);t?t.push(e):c.set(e.url,[e])}try{for(var h,f=o(m);!(h=await f.next()).done;){const n=h.value;if(n.error&&(s.cancel(),t.cancel(),alert("Seems like an error occurred during the import.  We were trying to import the following URL:\n\n"+n.originalUrl+"\n\nThe error was:\n\n"+n.error+"\n"+(null===(a=n.error)||void 0===a?void 0:a.stack)+'\n\nReally sorry about this!  Please let us know by filing a bug with the above error text (see the "Help and Support" menu).  We\'ll clean up any imported tabs so you can try again.')),t.cancelled)break;const o=n.finalUrl||n.originalUrl;if(n.title||n.finalUrl){const e=n.title||n.originalUrl,t=c.get(n.originalUrl);if(!t)continue;for(const n of t)await i.default.bookmarks.update(n.id,{url:o,title:e})}n.favIconUrl&&e.favicons.set(o,n.favIconUrl),++t.value}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}if(t.cancelled)for(const e of d)i.default.bookmarks.removeTree(e)}));n.onCancel=()=>{u.cancel(),m.cancel(),f.cancel()},await f}},8837:function(e,t,n){"use strict";var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,s){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,s,(t=e[n](t)).done,t.value)}))}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TabRemovedError=t.fetchSiteInfo=t.fetchInfoForSites=void 0;const i=s(n(3150)),r=n(6238);async function a(e){var t,n;let s,a,u;const h=()=>{c("timeout",e),s&&s.close()},m={complete:!1,originalUrl:e,finalUrl:void 0,title:void 0,favIconUrl:void 0},f=e=>{c("capturing",{status:e.status,title:e.title,url:e.url,favicon:e.favIconUrl?e.favIconUrl.substr(0,10):void 0}),e.url&&"about:blank"!==e.url&&(m.finalUrl=e.url),m.finalUrl&&(e.title&&(m.title=e.title),e.favIconUrl&&(m.favIconUrl=e.favIconUrl),"complete"===e.status&&(m.complete=!0,u&&clearTimeout(u),u=setTimeout(h,2e3))),c("current best",m)};try{s=function(){const e=new r.AsyncChannel,t=t=>e.send({$type:"create",id:t.id,tab:t}),n=(t,n,o)=>e.send({$type:"update",id:t,tab:o}),o=(t,n)=>e.send({$type:"replace",replacedWith:t,id:n}),s=t=>e.send({$type:"remove",id:t});return e.onClose=()=>{i.default.tabs.onCreated.removeListener(t),i.default.tabs.onUpdated.removeListener(n),i.default.tabs.onReplaced.removeListener(o),i.default.tabs.onRemoved.removeListener(s)},i.default.tabs.onCreated.addListener(t),i.default.tabs.onUpdated.addListener(n),i.default.tabs.onReplaced.addListener(o),i.default.tabs.onRemoved.addListener(s),e}(),a=await i.default.tabs.create({active:!1,url:e}),i.default.tabs.hide&&await i.default.tabs.hide(a.id),u=setTimeout(h,3e4);try{for(var p,v=o(s);!(p=await v.next()).done;){const t=p.value;if(t.id===a.id){switch(t.$type){case"create":case"update":f(t.tab);break;case"replace":c("replace",t.id,"=>",t.replacedWith),a=await i.default.tabs.get(t.replacedWith);break;case"remove":if(a=await l(s,e),!a)throw new d(e);f(a)}if(m.finalUrl&&m.title&&m.favIconUrl)break}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=v.return)&&await n.call(v)}finally{if(t)throw t.error}}}finally{u&&clearTimeout(u),a&&i.default.tabs.remove(a.id).catch(console.error),s&&s.close()}return c("final info",m),m}async function l(e,t){var n,s,r;const a=Date.now()-500,l=setTimeout((()=>{c("replacement timed out",t),e.close()}),3e3);try{const h=(await i.default.tabs.query({currentWindow:!0})).filter((e=>{var n;return(null!==(n=e.lastAccessed)&&void 0!==n?n:0)>=a&&e.url===t}));if(c("immediate replacement candidates",h),h.length>0)return h[0];try{for(var d,u=o(e);!(d=await u.next()).done;){const e=d.value;if("tab"in e)if((null!==(r=e.tab.lastAccessed)&&void 0!==r?r:0)<a)c("searching for replacement - too old",e);else if(e.tab.url===t)return c("found replacement",e),e.tab}}catch(e){n={error:e}}finally{try{d&&!d.done&&(s=u.return)&&await s.call(u)}finally{if(n)throw n.error}}return c("no replacement found"),void e.close()}finally{clearTimeout(l)}}t.fetchInfoForSites=function(e,t){const n=Array.from(e),o=new r.AsyncChannel,s=n.length;t.status="Fetching site info...",t.max=s;const i=t,l=async e=>{for(e.max=s;n.length>0;){const t=n.pop();e.status=t;try{o.send(await a(t))}catch(e){o.send({originalUrl:t,error:e})}if(e.value=s-n.length,i.cancelled)break}};let d=Math.min(4,n.length);const c=n.length/d,u=[];for(let e=0;e<d;++e)u.push(t.wspawn(c,(e=>l(e).finally((()=>{--d,0==d&&o.close()})))));return 0===u.length&&o.close(),t.onCancel=()=>u.forEach((e=>e.cancel())),o},t.fetchSiteInfo=a;class d extends Error{constructor(e){super(`Tab was removed after navigating to ${e}`),this.url=e}}function c(...e){globalThis.trace_siteinfo&&console.log("[siteinfo]",...e)}t.TabRemovedError=d},8005:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(6238),l=r(n(7006)),d=n(5365),c=i(n(2726));t.default=async function(){const e=await(0,a.resolveNamed)({browser_settings:c.BrowserSettings.Model.live(),options:c.Options.Model.live(),tabs:c.Tabs.Model.from_browser(),bookmarks:c.Bookmarks.Model.from_browser(),deleted_items:new c.DeletedItems.Model(new l.default("deleted_items"))}),t=new c.Model(Object.assign(Object.assign({},e),{favicons:new c.Favicons.Model(new d.KVSCache(new l.default("favicons"))),bookmark_metadata:new c.BookmarkMetadata.Model(new d.KVSCache(new l.default("bookmark-metadata")))}));return globalThis.model=t,t}},1977:(e,t,n)=>{"use strict";var o;let s;Object.defineProperty(t,"__esModule",{value:!0}),s=(null===(o=globalThis.mock)||void 0===o?void 0:o.events)?n(9504).$w:class{constructor(){this._listeners=new Set}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}hasListener(e){return this._listeners.has(e)}hasListeners(){return this._listeners.size>0}send(...e){Promise.resolve().then((()=>this.sendSync(...e)))}sendSync(...e){for(const t of this._listeners)try{t(...e)}catch(e){console.error(e)}}},t.default=function(e,t){return new s(e,t)}},6238:function(e,t,n){"use strict";var o,s=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.textMatcher=t.batchesOf=t.filterMap=t.AsyncChannel=t.DeferQueue=t.backingOff=t.nonReentrant=t.TimedOutError=t.tryAgain=t.shortPoll=t.nextTick=t.later=t.resolveNamed=t.asyncEvent=t.urlToOpen=t.cmpVersions=t.parseVersion=t.expect=t.deepEqual=t.bgKeyPressed=t.bgKeyName=t.altKeyName=t.REDIR_URL_TESTONLY=t.required=t.TaskCancelled=t.TaskMonitor=void 0;const l=a(n(3150)),d=r(n(357));var c=n(2409);Object.defineProperty(t,"TaskMonitor",{enumerable:!0,get:function(){return c.TaskMonitor}}),Object.defineProperty(t,"TaskCancelled",{enumerable:!0,get:function(){return c.TaskCancelled}}),t.required=e=>({type:e,required:!0});const u=l.default.runtime.getURL("restore.html");t.REDIR_URL_TESTONLY=u;let h={os:"unknown",arch:"unknown"};function m(e){return`${u}?url=${encodeURIComponent(e)}`}async function f(){await new Promise((e=>(0,t.later)(e))),await d.nextTick.apply(void 0)}l.default.runtime.getPlatformInfo().then((e=>{h=e})),t.altKeyName=()=>"mac"===h.os?"Option":"Alt",t.bgKeyName=()=>"mac"===h.os?"Cmd":"Ctrl",t.bgKeyPressed=e=>"mac"===h.os?e.metaKey:e.ctrlKey,t.deepEqual=function e(t,n){if(t===n)return!0;if("object"!=typeof t||"object"!=typeof n)return!1;if(null===t||null===n)return!1;if(t instanceof Array&&n instanceof Array){if(t.length!==n.length)return!1;for(let o=0;o<t.length;++o)if(!e(t[o],n[o]))return!1;return!0}if(!(t instanceof Array||n instanceof Array)){const o=Object.keys(t).sort();if(!e(o,Object.keys(n).sort()))return!1;for(const s of o)if(!e(t[s],n[s]))return!1;return!0}return!1},t.expect=function(e,t){if(void 0!==e)return e;throw new Error(t())},t.parseVersion=e=>e.split(".").map((e=>parseInt(e))),t.cmpVersions=function(e,n){const o=(0,t.parseVersion)(e),s=(0,t.parseVersion)(n);let i=0,r=Math.min(o.length,s.length);for(i=0;i<r;++i)if(o[i]!=s[i])return o[i]-s[i];return(o.length>s.length?o:s).slice(r).every((e=>0==e))?0:o.length-s.length},t.urlToOpen=function(e){try{const t=new URL(e);switch(t.protocol){case"about:":switch(t.pathname){case"blank":case"logo":break;case"reader":const n=t.searchParams.get("url");if(n)return n+t.hash;default:return m(e)}break;case"chrome:":if(!l.default.runtime.getBrowserInfo)break;return m(e);case"javascript:":case"file:":case"data:":return m(e)}return e}catch(t){return m(e)}},t.asyncEvent=function(e){return function(...t){return e.apply(this,t).catch(console.error)}},t.resolveNamed=async function(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const o=e[n];t[n]=o instanceof Promise?await o:o}return t},t.later=null!==(o=globalThis.setImmediate)&&void 0!==o?o:globalThis.setTimeout,t.nextTick=f,t.shortPoll=async function(e){const t=Date.now();for(;Date.now()-t<10;){try{return e()}catch(e){if(e!==p)throw e}await f()}throw new v};const p=Symbol("TRY_AGAIN");t.tryAgain=function(){throw p};class v extends Error{constructor(){super("Timed out")}}function g(e){let t,n,o;const s=()=>t?(n||(n=new Promise((e=>{o=e}))),n):(t=e().finally((()=>{if(t=void 0,n){let e=o;n=void 0,o=void 0,s().finally(e)}})).catch(console.log),t);return s}t.TimedOutError=v,t.nonReentrant=g,t.backingOff=function(e,t={max_delay_ms:6e4,first_delay_ms:100,exponent:2,reset_after_idle_ms:3e5}){let n=Date.now(),o=0;return g((async()=>{const s=Date.now()-n;void 0!==t.reset_after_idle_ms&&s>t.reset_after_idle_ms&&(o=0);const i=Math.min(t.max_delay_ms,t.first_delay_ms*o**t.exponent);s<i&&await new Promise((e=>setTimeout(e,i-s)));try{return await e()}finally{++o,n=Date.now()}}))},t.DeferQueue=class{constructor(){this._events=[]}push(e,...t){null!==this._events?this._events.push([e,t]):e(...t)}wrap(e){return(...t)=>this.push(e,...t)}unplug(){let e=this._events;if(this._events=null,e)for(let[t,n]of e)t(...n)}};class b{constructor(){this._queue=[],this._waiters=[],this._done=!1}send(e){if(this._done)throw new ReferenceError("send() on a closed channel");this._waiters.length>0?this._waiters.shift()({done:!1,value:e}):this._queue.push(e)}close(){this._done=!0;for(const e of this._waiters)e({done:!0,value:void 0});this._waiters=[],this.onClose&&this.onClose()}[Symbol.asyncIterator](){return this}next(){return new Promise(((e,t)=>{this._queue.length>0?e({done:!1,value:this._queue.shift()}):this._done?e({done:!0,value:void 0}):this._waiters.push(e)}))}}t.AsyncChannel=b,t.filterMap=function(e,t){const n=[];for(const o of e){const e=t(o);void 0!==e&&n.push(e)}return n},t.batchesOf=function(e,t){return{[Symbol.iterator](){return this},next(){const n=[];for(;n.length<e;){const e=t.next();if(e.done)break;n.push(e.value)}return{done:0===n.length,value:n}}}},t.textMatcher=function(e){if(""===e)return e=>!0;try{const t=new RegExp(e,"iu");return e=>t.test(e)}catch(t){const n=e.normalize().toLocaleLowerCase();return e=>e.normalize().toLocaleLowerCase().includes(n)}}},3182:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NanoDisconnectedError=t.NanoTimeoutError=t.NanoPortError=t.RemoteNanoError=t.connect=t.listen=t.registry=void 0;const r=i(n(3197));t.registry=r.registry,t.listen=function(e,t){r.registry.register(e,t)},t.connect=function(e){return r.Port.connect(e)};class a extends Error{constructor(e){super(e.message),this.remote=e}get name(){return this.remote.name}get stack(){return`[remote stack] ${this.remote.stack}`}get data(){return this.remote.data}}t.RemoteNanoError=a;class l extends Error{}t.NanoPortError=l,t.NanoTimeoutError=class extends l{constructor(e,t,n){super(`${e}: Request timed out`),this.portName=e,this.name="NanoTimeoutError",this.request=t,this.tag=n}},t.NanoDisconnectedError=class extends l{constructor(e,t){super(`${e}: Port was disconnected while waiting for response`),this.portName=e,this.name="NanoDisconnectedError",this.tag=t}}},3197:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Port=t.registry=t.SvcRegistry=void 0;const s=o(n(3150)),i=n(2348),r=n(3182),a=n(3413);let l=0;const d=(...e)=>{var t;globalThis.trace_nano_ports&&console.log(`[NanoPort ${null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===t?void 0:t.pathname}]`,...e)};class c{constructor(){this.services=new Map,this.listener=e=>{const t=this.services.get(e.name);if(!t)return void d(`[listener] ignored connection for ${e.name}`);++l;const n=new u(`${e.name}<${l}`,e);n.onDisconnect=()=>{t.onDisconnect&&t.onDisconnect(n)},n.onRequest=e=>t.onRequest?t.onRequest(n,e):h(),n.onNotify=e=>{t.onNotify?t.onNotify(n,e):t.onRequest&&t.onRequest(n,e)},d(`[listener] Accepted connection for ${e.name} as ${n.name}`),t.onConnect&&t.onConnect(n)}}reset_testonly(){this.services.clear(),s.default.runtime.onConnect.removeListener(this.listener)}register(e,t){if(this.services.has(e))throw new Error(`Service ${e} is already launched`);d("[listener] listening for service",e),this.services.set(e,t),1==this.services.size&&s.default.runtime.onConnect.addListener(this.listener)}}t.SvcRegistry=c,t.registry=new c;class u{constructor(e,t){this.defaultTimeoutMS=1e4,this.pending=new Map,this.name=e,this.port=t,this.port.onDisconnect.addListener((()=>{this._trace("disconnected"),this._flushPendingOnDisconnect(),this.onDisconnect&&this.onDisconnect(this)})),this.port.onMessage.addListener((e=>{this._trace("recv",e),"object"==typeof e&&("tag"in e?"request"in e?(0,i.logErrorsFrom)((()=>this._handleRequest(e))):("response"in e||"error"in e)&&this._handleResponse(e):"notify"in e&&(this.onNotify?this.onNotify(e.notify):this.onRequest&&this.onRequest(e.notify)))})),this._trace("create")}static connect(e){return d("connect",e),new u(e,s.default.runtime.connect(void 0,{name:e}))}disconnect(){this._trace("disconnect"),this.port.disconnect(),this._flushPendingOnDisconnect(),this.onDisconnect&&this.onDisconnect(this)}request(e,t){return new Promise(((n,o)=>{var s;let i=(0,a.makeRandomString)(4);for(;this.pending.has(i);)i=(0,a.makeRandomString)(4);this._trace("send",{tag:i,request:e});try{this.port.postMessage({tag:i,request:e})}catch(e){throw this.disconnect(),e}this.pending.set(i,{resolve:n,reject:o,timeout_id:setTimeout((()=>{this.pending.delete(i),o(new r.NanoTimeoutError(this.name,e,i))}),null!==(s=null==t?void 0:t.timeout_ms)&&void 0!==s?s:this.defaultTimeoutMS)})}))}notify(e){try{this._trace("send",{notify:e}),this.port.postMessage({notify:e})}catch(e){this.disconnect()}}_flushPendingOnDisconnect(){for(const[e,t]of this.pending)this._trace("flush on disconnect",e),t.reject(new r.NanoDisconnectedError(this.name,e));this.pending.clear()}async _handleRequest(e){let t;try{this.onRequest||await h(),t={response:await this.onRequest(e.request)}}catch(e){let n;try{n=JSON.parse(JSON.stringify(e))}catch(t){n=`${e}`}t=e instanceof Error?{error:{name:e.name,message:e.message,stack:e.stack,data:n}}:e instanceof Object?{error:{name:e.constructor.name,data:n}}:{error:{name:"",data:n}}}const n=Object.assign({tag:e.tag},t);try{this._trace("send",n),this.port.postMessage(n)}catch(t){this._trace("dropped reply to request:",e,"error:",t)}}_handleResponse(e){const t=this.pending.get(e.tag);t&&("response"in e?t.resolve(e.response):t.reject(new r.RemoteNanoError(e.error)))}_trace(...e){d(`[${this.name}]`,...e)}}function h(){const e=new Error("No request handler defined");return e.name="NotImplemented",Promise.reject(e)}t.Port=u},2348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearErrorLog=t.logError=t.logErrorsFrom=t.errorLog=t.ERROR_LOG_SIZE=void 0;const o=n(357);function s(e){if(console.error(e),e instanceof Error)t.errorLog.push({error:e,summary:e.message,details:e.stack||e.message});else if("object"==typeof e){const n=e;t.errorLog.push({error:e,summary:String(e),details:"stack"in n&&"string"==typeof n.stack?n.stack:String(e)})}else t.errorLog.push({error:e,summary:String(e),details:String(e)});for(;t.errorLog.length>t.ERROR_LOG_SIZE;)t.errorLog.shift()}t.ERROR_LOG_SIZE=10,t.errorLog=(0,o.shallowReactive)([]),globalThis.error_log=t.errorLog,t.logErrorsFrom=async function(e){try{return await e()}catch(e){throw s(e),e}},t.logError=s,t.clearErrorLog=function(){t.errorLog.splice(0,t.errorLog.length)}},2409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCancelled=t.TaskMonitor=void 0;const o=n(357);function s(e,t,n){const o=new r(e,t),s=n(o).finally((()=>o.detach()));return Object.assign(s,{progress:o.progress,cancel(){o.cancel()}})}function i(e,t,n){let o=new r(e,t);const s=n(o);return{[Symbol.asyncIterator](){return this},async next(){const e=await s.next();return o&&e.done&&(o.detach(),o=void 0),e},progress:o.progress,cancel(){null==o||o.cancel()}}}class r{constructor(e,t){this.onCancel=void 0,this._cancelled=!1,this._children=[],this.progress=function(e,t){let n=0,s=1;function i(o,i){if(e){const r=(t||1)*o/(i||1),a=(t||1)*n/(s||1);e.value+=a-r}}const r=(0,o.reactive)({id:e?`${e.id}/${e._child_count}`:"",status:"",children:[],_child_count:0,get value(){return n},set value(e){if(e<0)throw new RangeError("value must be >= 0");e>s&&(e=s);const t=n;n=e,i(t,s)},get max(){return s},set max(e){if(e<0)throw new RangeError("max must be >= 0");const t=s;s=e,i(n,t)},_detach(){e&&(e.children.splice(e.children.indexOf(this),1),e=void 0)}});return e&&(e._child_count+=1,e.children.push(r)),r}(null==e?void 0:e.progress,t),this._parent=e,this._parent&&this._parent._children.push(this)}static run(e){return s(void 0,1,e)}static run_iter(e){return i(void 0,1,e)}detach(){this.progress._detach(),this._parent&&(this._parent._children.splice(this._parent._children.indexOf(this),1),this._parent=void 0)}spawn(e){return this.wspawn(1,e)}wspawn(e,t){return s(this,e,t)}spawn_iter(e){return this.wspawn_iter(1,e)}wspawn_iter(e,t){return i(this,e,t)}get cancelled(){return this._cancelled}cancel(){this._cancelled=!0}get status(){return this.progress.status}set status(e){this.progress.status=e,this._cancelCheck()}get value(){return this.progress.value}set value(e){this.progress.value=e,this._cancelCheck()}get max(){return this.progress.max}set max(e){this.progress.max=e,this._cancelCheck()}_cancelCheck(){this._parent&&this._parent._cancelCheck(),this.onCancel&&this._cancelled&&(this.onCancel(),this.onCancel=void 0)}}t.TaskMonitor=r;class a extends Error{}t.TaskCancelled=a},3413:(e,t,n)=>{"use strict";var o,s;let i;if(Object.defineProperty(t,"__esModule",{value:!0}),t.makeRandomString=void 0,t.makeRandomString=i,null===(s=null===(o=globalThis)||void 0===o?void 0:o.crypto)||void 0===s?void 0:s.getRandomValues)t.makeRandomString=i=e=>{const t=new Uint8Array(e);return crypto.getRandomValues(t),btoa(String.fromCharCode(...t)).replace(/=+$/,"")};else{const e=n(6784);t.makeRandomString=i=t=>e.randomBytes(t).toString("base64").replace(/=+$/,"")}},6948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventWiring=void 0,t.EventWiring=class{constructor(e,t){this.model=e,this.options=t}listen(e,t){const n=t.bind(this.model),o=(...e)=>{try{return this.options.onFired(),n(...e)}catch(e){throw this.options.onError(e),e}};return e.addListener(o),o}}},5735:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(9567),s=n(4649);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},4398:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(4914),s=n(9701);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},5792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(6155),s=n(8175);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},59:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(6691),s=n(2553);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},9004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(7434),s=n(5394);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},2517:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(2581),s=n(8741);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},5052:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(5278),s=n(1167),i=n(170),r=n.n(i),a=n(3744);const l={};l.$style=r();const d=(0,a.Z)(s.Z,[["render",o.s],["__cssModules",l]])},7227:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(318),s=n(7763),i=n(8056),r=n.n(i),a=n(3744);const l={};l.$style=r();const d=(0,a.Z)(s.Z,[["render",o.s],["__cssModules",l]])},7912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(1701),s=n(4643);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},6026:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(993),s=n.n(o),i=n(590),r=n.n(i),a=n(3744);const l={};l.$style=r();const d=(0,a.Z)(s(),[["__cssModules",l]])},9522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(1421),s=n(1251);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},1412:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(9278),s=n(8679);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},7403:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(2474),s=n(701);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},8448:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(9799),s=n(4339);const i=(0,n(3744).Z)(s.Z,[["render",o.s]])},6187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(5553),s=n(1120),i=n.n(s);const r=(0,n(3744).Z)(i(),[["render",o.s]])},4259:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(1553),s=n(9302),i=n.n(s);const r=(0,n(3744).Z)(i(),[["render",o.s]])},5663:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(4825),s=n(1246),i=n(6936),r=n.n(i),a=n(3744);const l={};l.$style=r();const d=(0,a.Z)(s.Z,[["render",o.s],["__cssModules",l]])},373:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(925),s=n(3104),i=n.n(s);const r=(0,n(3744).Z)(i(),[["render",o.s]])},6722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(7599),s=n(275),i=n.n(s);const r=(0,n(3744).Z)(i(),[["render",o.s]])},2714:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(9772),s=n(6996),i=n(2700),r=n.n(i),a=n(3744);const l={};l.$style=r();const d=(0,a.Z)(s.Z,[["render",o.s],["__cssModules",l]])},1151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(4145),s=n(5872),i=n(1452),r=n.n(i),a=n(3744);const l={};l.$style=r();const d=(0,a.Z)(s.Z,[["render",o.s],["__cssModules",l]])},170:(e,t,n)=>{var o=n(2629);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,n(7913).Z)("629fab9e",o,!1,{})},8056:(e,t,n)=>{var o=n(1504);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,n(7913).Z)("776bdafa",o,!1,{})},590:(e,t,n)=>{var o=n(3409);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,n(7913).Z)("71d469d8",o,!1,{})},6936:(e,t,n)=>{var o=n(7835);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,n(7913).Z)("78e8aad5",o,!1,{})},2700:(e,t,n)=>{var o=n(8692);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,n(7913).Z)("73040e92",o,!1,{})},1452:(e,t,n)=>{var o=n(6406);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,n(7913).Z)("91945034",o,!1,{})},6784:()=>{}},n={};function o(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={id:e,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,s,i)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,s,i]=e[c],a=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(a=!1,i<r&&(r=i));if(a){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,s,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=396,(()=>{var e={396:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[r,a,l]=n,d=0;if(r.some((t=>0!==e[t]))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var c=l(o)}for(t&&t(n);d<r.length;d++)i=r[d],o.o(e,i)&&e[i]&&e[i][0](),e[r[d]]=0;return o.O(c)},n=self.webpackChunktab_stash=self.webpackChunktab_stash||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=o.O(void 0,[647],(()=>o(6825)));s=o.O(s)})();
//# sourceMappingURL=stash-list.js.map